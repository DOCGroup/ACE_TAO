--- orig/PolicyFactoryC.h	2005-04-23 21:12:35.022166400 +0200
+++ PolicyFactoryC.h	2005-04-15 13:04:39.000000000 +0200
@@ -1,6 +1,6 @@
 // -*- C++ -*-
 //

 // ****  Code generated by the The ACE ORB (TAO) IDL Compiler ****
 // TAO and the TAO IDL Compiler have been developed by:
@@ -26,7 +26,7 @@
 //     http://www.cs.wustl.edu/~schmidt/TAO.html

 // TAO_IDL - Generated from
-// be\be_codegen.cpp:153
+// .\be\be_codegen.cpp:153

 #ifndef _TAO_IDL_ORIG_POLICYFACTORYC_H_
 #define _TAO_IDL_ORIG_POLICYFACTORYC_H_
@@ -66,13 +66,13 @@
 #endif /* __BORLANDC__ */

 // TAO_IDL - Generated from
-// be\be_visitor_module/module_ch.cpp:48
+// c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_module/module_ch.cpp:48

 namespace PortableInterceptor
 {

   // TAO_IDL - Generated from
-  // be\be_interface.cpp:598
+  // .\be\be_interface.cpp:598

 #if !defined (_PORTABLEINTERCEPTOR_POLICYFACTORY__VAR_OUT_CH_)
 #define _PORTABLEINTERCEPTOR_POLICYFACTORY__VAR_OUT_CH_
@@ -95,7 +95,7 @@
 #endif /* end #if !defined */

   // TAO_IDL - Generated from
-  // be\be_visitor_interface/interface_ch.cpp:54
+  // c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_interface/interface_ch.cpp:54

 #if !defined (_PORTABLEINTERCEPTOR_POLICYFACTORY_CH_)
 #define _PORTABLEINTERCEPTOR_POLICYFACTORY_CH_
@@ -130,7 +130,7 @@
     static void _tao_any_destructor (void *);

     // TAO_IDL - Generated from
-    // be\be_visitor_operation/operation_ch.cpp:46
+    // c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_operation/operation_ch.cpp:46

     virtual ::CORBA::Policy_ptr create_policy (
         ::CORBA::PolicyType type,
@@ -142,8 +142,18 @@
         ::CORBA::PolicyError
       )) = 0;

+    // Hand-crafted addition.
+    virtual ::CORBA::Policy_ptr _create_policy (
+        CORBA::PolicyType type
+      );
+
     // TAO_IDL - Generated from
-    // be\be_visitor_interface/interface_ch.cpp:210
+    // c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_interface/interface_ch.cpp:210

     virtual CORBA::Boolean _is_a (
         const char *type_id
@@ -169,17 +179,17 @@
 #endif /* end #if !defined */

   // TAO_IDL - Generated from
-  // be\be_visitor_typecode/typecode_decl.cpp:44
+  // c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_typecode/typecode_decl.cpp:44

   extern TAO_Export ::CORBA::TypeCode_ptr const _tc_PolicyFactory;

 // TAO_IDL - Generated from
-// be\be_visitor_module/module_ch.cpp:66
+// c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_module/module_ch.cpp:66

 } // module PortableInterceptor

 // TAO_IDL - Generated from
-// be\be_visitor_traits.cpp:61
+// .\be\be_visitor_traits.cpp:61

 // Traits specializations.
 namespace TAO
@@ -208,14 +218,14 @@
 }

 // TAO_IDL - Generated from
-// be\be_visitor_interface/any_op_ch.cpp:52
+// c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_interface/any_op_ch.cpp:52

 TAO_Export void operator<<= (CORBA::Any &, PortableInterceptor::PolicyFactory_ptr); // copying
 TAO_Export void operator<<= (CORBA::Any &, PortableInterceptor::PolicyFactory_ptr *); // non-copying
 TAO_Export CORBA::Boolean operator>>= (const CORBA::Any &, PortableInterceptor::PolicyFactory_ptr &);

 // TAO_IDL - Generated from
-// be\be_codegen.cpp:955
+// .\be\be_codegen.cpp:955

 #if defined(_MSC_VER)
 #pragma warning(pop)
--- orig/PolicyFactoryC.cpp	2005-04-23 21:12:35.022166400 +0200
+++ PolicyFactoryC.cpp	2005-04-15 13:04:39.000000000 +0200
@@ -1,6 +1,6 @@
 // -*- C++ -*-
 //

 // ****  Code generated by the The ACE ORB (TAO) IDL Compiler ****
 // TAO and the TAO IDL Compiler have been developed by:
@@ -26,7 +26,7 @@
 //     http://www.cs.wustl.edu/~schmidt/TAO.html

 // TAO_IDL - Generated from
-// be\be_codegen.cpp:291
+// .\be\be_codegen.cpp:291


 #include "PolicyFactoryC.h"
@@ -38,7 +38,7 @@
 #endif /* __BORLANDC__ */

 // TAO_IDL - Generated from
-// be\be_visitor_arg_traits.cpp:69
+// .\be\be_visitor_arg_traits.cpp:69

 // Arg traits specializations.
 namespace TAO
@@ -47,7 +47,7 @@


 // TAO_IDL - Generated from
-// be\be_visitor_interface/interface_cs.cpp:60
+// c:\ace\latest\ace_wrappers\tao\tao_idl\be\be_visitor_interface/interface_cs.cpp:60

 // Traits specializations for PortableInterceptor::PolicyFactory.

@@ -186,3 +186,15 @@
 {
   return false;
 }
+
+// Hand-crafted.
+::CORBA::Policy_ptr
+PortableInterceptor::PolicyFactory::_create_policy (CORBA::PolicyType)
+{
+  throw ::CORBA::PolicyError (CORBA::BAD_POLICY_TYPE);
+}
+
