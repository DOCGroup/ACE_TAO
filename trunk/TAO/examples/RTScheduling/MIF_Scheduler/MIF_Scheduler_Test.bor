# Makefile for building the test exe with Borland C++ Builder

NAME = test

TAO_IDL = $(CORE_BINDIR)\tao_idl -g $(CORE_BINDIR)\gperf.exe

OBJFILES = \
	$(OBJDIR)\DT_Creator.obj \
	$(OBJDIR)\JobC.obj \
	$(OBJDIR)\JobS.obj \
	$(OBJDIR)\Job_i.obj \
	$(OBJDIR)\MIF_SchedulingC.obj \
	$(OBJDIR)\POA_Holder.obj \
	$(OBJDIR)\SynchC.obj \
	$(OBJDIR)\SynchS.obj \
	$(OBJDIR)\Synch_i.obj \
	$(OBJDIR)\Task_Stats.obj \
	$(OBJDIR)\Thread_Task.obj \
	$(OBJDIR)\MIF_DT_Creator.obj \
	$(OBJDIR)\MIF_Scheduler.obj \
	$(OBJDIR)\MIF_Task.obj \
	$(OBJDIR)\test.obj

LFLAGS = \
	-j..\..\..\..\lib\$(CONFIG_SUBDIR) -j..\..\..\..\lib \
	-L..\..\..\..\lib\$(CONFIG_SUBDIR) -L..\..\..\..\lib \
  -j$(CORE_BINDIR) \
  -L$(CORE_BINDIR)

LIBFILES = \
	TAO_RTScheduler$(LIB_DECORATOR).lib \
	TAO_RTPortableServer$(LIB_DECORATOR).lib \
	TAO_RTCORBA$(LIB_DECORATOR).lib \
	TAO_CosNaming$(LIB_DECORATOR).lib \
	TAO_Svc_Utils$(LIB_DECORATOR).lib \
	TAO_IORTable$(LIB_DECORATOR).lib \
	TAO_PortableServer$(LIB_DECORATOR).lib \
	TAO_IORInterceptor$(LIB_DECORATOR).lib \
	TAO_Valuetype$(LIB_DECORATOR).lib \
	TAO_ObjRefTemplate$(LIB_DECORATOR).lib \
	TAO$(LIB_DECORATOR).lib \
	ACE$(LIB_DECORATOR).lib \


IDLFILES = \
	$(IDLDIR)\Job.idl \
	$(IDLDIR)\Synch.idl

!ifdef STATIC
LIB_FLAGS = -DTAO_AS_STATIC_LIBS -DTAO_AS_STATIC_LIBS -DACE_AS_STATIC_LIBS
DLL_FLAGS =
!else
LIB_FLAGS =
DLL_FLAGS =
!endif

CFLAGS = \
	-I..\..\..\orbsvcs \
	-I..\..\.. \
	-I..\..\..\tao \
	-I..\..\..\.. \
	$(LIB_FLAGS) \
	$(DLL_FLAGS)

CPPDIR = .;..

IDLDIR = ..

INCLUDES = \
	..\DT_Creator.h \
	..\JobC.h \
	..\JobS.h \
	..\Job_i.h \
	..\MIF_SchedulingC.h \
	..\POA_Holder.h \
	..\SynchC.h \
	..\SynchS.h \
	..\Synch_i.h \
	..\Task_Stats.h \
	..\Thread_Task.h \
	MIF_DT_Creator.h \
	MIF_Scheduler.h \
	MIF_Task.h \
	test.h \
	..\JobC.i \
	..\JobS.i \
	..\MIF_SchedulingC.i \
	..\SynchC.i \
	..\SynchS.i \
	..\Task_Stats.inl \
	..\Job.idl \
	..\Synch.idl

all: idl_src_files

!include <$(ACE_ROOT)\include\makeinclude\build_exe.bor>

#
# IDL Build rules
#

idl_src_files: $(IDLFILES:.idl=C.cpp) $(IDLFILES:.idl=S.cpp)

# IDL File Directory: ..
..\JobS.cpp ..\JobC.cpp: ..\Job.idl
	$(TAO_IDL) -o .. -Ge 1 -Sc -Wb,pre_include=ace\pre.h -Wb,post_include=ace\post.h -Gv -Ge 1 -Sc -Wb,pre_include=ace\pre.h -Wb,post_include=ace\post.h $**
# IDL File Directory: ..
..\SynchS.cpp ..\SynchC.cpp: ..\Synch.idl
	$(TAO_IDL) -o .. -Ge 1 -Sc -Wb,pre_include=ace\pre.h -Wb,post_include=ace\post.h -Gv -Ge 1 -Sc -Wb,pre_include=ace\pre.h -Wb,post_include=ace\post.h $**
