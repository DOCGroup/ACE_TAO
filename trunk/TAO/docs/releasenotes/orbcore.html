<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">

<html>
  <head>
    <title>ORB & ORB Core Status</title>
  </head>

    <HR>
    <H3><A NAME="orb"></A>ORB &amp; ORB Core</H3>
    Point of contact: <A HREF="mailto:cleeland@cs.wustl.edu">Chris Cleeland</A>

    <BLOCKQUOTE>Current status:

      <UL>
	<LI>
	  Provides dynamically linked wholesale assignment of ORB
	  strategies for communication, concurrency, demultiplexing,
	  scheduling, and dispatching using the ACE Service
	  Configurator framework.</LI>

	<LI>
	  Supports several concurrency models out of the box:
	  Reactive, Thread-per-Connection, and ORB-per-thread. The
	  ORB-per-thread design is optimized for real-time I/O
	  subsystems.</LI>
      </UL>

      Recently Completed Work:

      <BLOCKQUOTE>
	<li>Eliminated need for <code>CORBA::Object</code> to keep a
	pointer to its orb sitting around anywhere.</li>

	<LI>Tested <code>CORBA_ORB::shutdown()</code> as a manner in
	which a thread of control can request that
	<code>CORBA_ORB::run()</code> should return and no longer
	service requests.  It only honors a
	<em>wait_for_completion</em> argument of <b>FALSE</b> right
	now because we haven't fully explored the issues which
	surround doing all the completion.</li>

	<li>Fixed bugs reported by Steven Wohlever, David Miron,
	Manojkumar Acharya.</li>

	<li>Created a brief section in <a
	href="../../TAO-Install.html"><code>$TAO_ROOT/TAO-Install.html</code></a>
	that <em>briefly</em> documents installation on Unix platforms.  There is
	also a brief section which documents issues that apply across ALL
	platforms, such as the fact that TAO and its application will
	likely not work well if your ACE is linked through Orbix,
	VisiBroker, or another ORB.
	<a href="../../ChangeLog">ChangeLog</a> discovery attribution for
	this should go to <em>Steve Wohlever
	&lt;wohlever@mitre.org&gt;</em>.</li>

	<LI>Implemented <code>CORBA_ORB::shutdown()</code> as a manner
	in which a thread of control can request that
	<code>CORBA_ORB::run()</code> should return and no longer
	service requests.</li>

	<LI>Validated movement of Strategy Connector into
	ORB&nbsp;Core.</LI>

	<li>Debated details of <code>Svc_Handler</code> modifications
	with Irfan.</li>

	<li>Tested and commited <code>Connector::connect_n</code> changes
	to ACE</code>.</li>

	<li>ACE & TAO compiling cleanly using Sun's CC on Solaris and
	G++ on Linux.  Also, the ACE tests run properly.</li>

	<li>Use <code>truss</code> to verify for <a
	href="mailto:PAUL.G.WEHLAGE@cdev.com">Paul Wehlage</a> that
	TAO really uses <code>select</code> vs. <code>recv</code> for
	<b>-R</b> vs. <b>-T</b>.</li>

	<li>Renamed <code>boa.*</code> to <code>poa.*</code>.</li>

	<LI>Renamed following files:&nbsp;Orb_Core.*&nbsp;->orb_core.*
	&amp;&nbsp;orbobj.* -> corba_orb.*.</LI>

	<LI>The lock used in <code>giop.cpp:626</code> originally
	appeared in the IIOP-1.4 code base.  Its purpose was to
	protect access to the <code>fwd_profile</code> data member.
	The original features are available, but they are currently
	not used because none of our concurrency models present a
	thread-unsafe condition.  The <a
	href="../../ChangeLog">ChangeLog</a> presents more details on
	the subject.</li>

	<li>Fixed problems seen by <a
	href="mailto:brian.r.mendel@boeing.com">Brian Mendel</a> of
	Boeing where the Cubit server application was crashing in
	<code>TAO_OA_Connection_Handler::handle_message</code> when it
	was trying to call <code>CORBA::POA::handle_request</code>
	through a NULL <code>root_poa</code> pointer.  The NULL
	pointer resulted from the inadvertent use of the
	Thread-per-Connection concurrency model, which is currently
	incompatible with the ORB-per-thread model.  It was not caught
	because the change is normally done in configuration files
	parsed by the Service Configurator, and VxWorks requires
	special code in that area which was not tested until Boeing
	got hold of the code.</li>

	<li>Clean up build under g++.  All 'function used before
	declared inline' warnings have been eliminated.  Also, all
	other warnings (except for one that is nearly unavoidable)
	have been eliminated.
	</li>

	<LI>Removed BOA and ROA names from the ORB.</LI>

	<LI>Changed <code>CORBA_ORB::open()</code> to return an error
	status (first cut at this already there--needs to be checked
	out).</LI>

	<LI>Put README file in multiCubit test.</li>

      </BLOCKQUOTE>

      Ongoing Work:

      <BLOCKQUOTE>
	<LI>Verify ACE & TAO on Linux.</LI>

	<LI>Use Purify to eliminate straggling problems.</LI>

      </BLOCKQUOTE>

      Current Work:

      <BLOCKQUOTE>
	<LI>
	  <p>
	    Verify that, in the ORB-per-thread concurrency model, it's
	    possible to have a factory in each thread that creates a
	    client and returns an object reference to that client
	    within that thread.  This is different from the model that
	    Sumedh originally had where the factory was trying to turn
	    out a client in a separate thread/ORB combination.</p>
	  <p>
	    There is no application which attempts this at the moment,
	    so both a client and a server will need to be
	    manufactured.  Using existing Cubit-like examples (that
	    poor app is so weary) should reduce development time to a
	    couple of hours.</p>
	  <p>
	    The real strategy/solution is to make
	    <code>CORBA::Object</code> not keep a pointer to its orb
	    sitting around anywhere.  It should only get it when it
	    needs it.  This should not be difficult to change.</p>
	</LI>

      </BLOCKQUOTE>

      Critical Work:

      <BLOCKQUOTE>

	<LI>Add pre-cached connection on client side.  Clients will
	pass in a comma-separated list of <em>host:port</em>
	destinations using the <code>CORBA::ORB_init()</code>
	interface.</LI>

	<li>Get rid of need to have compile in TSS ORB Core
	(<code>-DTAO_HAS_TSS_ORBCORE</code>).  Create an ORB Policy
	Factory which is consulted for the pointers which go into
	TAO_ORB_Core instances.  Thus, it is the only place that needs
	to know whether the items should be global or held in
	TSS.</li>

	<li>Fix TAO so that the default port of 5001 is defined in a
	config header somewhere rather than in orbobj.cpp.</li>

      </BLOCKQUOTE>

      Future work:
      <UL>
	<li>Make the section in <a
	href="../../TAO-Install.html"><code>$TAO_ROOT/TAO-Install.html</code></a>
	that documents installation on Unix platforms more complete.
	</li>

	<li>Improve the <code>Service Configurator</code> service
	entry faking on VxWorks.</li>

	<LI>There is a bug in the ORB-per-thread concurrency model
	caused by its use of the ACE Service Configurator. The bug is
	understood, and a patch is being readied and should be
	released no later than October 3rd.</LI>

	<LI>The ORB-per-thread model is not yet integrated with the
	other concurrency models; it must be selected at <I>compile
	time</I> rather than run time.  In order to use it, one must
	add <TT>-DTAO_HAS_TSS_ORBCORE</TT> to the compile line in both
	the library (<TT>$(TAO_ROOT)/tao</TT>) and the application
	(<I>e.g.</I>, <TT>$(TAO_ROOT)/tests/multiCubit</TT>). Future
	releases of TAO will fix this restriction so that all
	threading models are available at run-time.</LI>

	<LI>Support new concurrency models, e.g.,
	Thread-per-Request.</LI>

	<LI>Clean up the internals and analyze for performance bottlenecks using Quantify.</LI>

	<LI>Integrate the <A HREF="#poa">POA</A> implementation.</LI>

	<LI>Add support for <TT>resolve_initial_references</TT> using
	ACE support for UDP broadcast.</LI>

	<LI>Assist in porting higher level services (e.g., <A
	HREF="#eventchannel">Event Channel</A>) to TAO.</LI>

	<li>Compile and verify ACE and TAO on Linux using the Kuck and
	Associates, Inc. (KAI) compiler tools.</li>

      </UL>
    </BLOCKQUOTE>

  </body>
</html>
