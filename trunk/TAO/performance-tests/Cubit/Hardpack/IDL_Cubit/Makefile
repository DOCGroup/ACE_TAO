/* $Id$ */
# Makefile generated by imake - do not edit!
# $XConsortium: imake.c,v 1.72 92/09/14 11:44:22 rws Exp $
#
# The cpp used on this machine replaces all newlines and multiple tabs and
# spaces in a macro expansion with a single space.  Imake tries to compensate
# for this, but is not always successful.
#

CCC=CC
CC=cc

CFLAGS=-g -D_DEBUG=3 -DDSI_DEBUG=3   $(INC) -xs -DBSD_COMP
CCFLAGS=-g -D_DEBUG=3 -DDSI_DEBUG=3   -D_IR_hh $(INC) -xs -DBSD_COMP -i
OSLIBS=-lthread -lposix4 -lsocket -lnsl -lm

# @(#) (C) Copyright Lockheed Martin 1996, 1997, 1998 (Unpublished). All rights reserved. Imakefile 1.3 changed 5/22/98 13:34:14

BUILD=/project/doc/pkg/Hardpack/dsi_5.1/SunOS_5.5.1
PREPRO  = $(BUILD)/bin/idlpp_cc

CCFLAGS += -mt -xildoff

INC=-I$(BUILD)/include -I$(ACE_ROOT) -I/usr/include -I/usr/include/sys
LIBS=$(BUILD)/Templates.DB/$()*.o -L$(BUILD)/lib -lORB++ -lORB -lES -L$(ACE_ROOT)/ace -lACE

all:	cubit.hh client server

client:  client.cpp client_i.cpp  cubit_c.cc cubit.hh
	       $(CCC) $(CCFLAGS) $(INC) -o client \
	cubit_c.cc client_i.cpp client.cpp \
	$(LIBS) $(OSLIBS)

server:  server.cpp server_i.cpp cubit_impl.cc cubit_s.cc cubit_c.cc cubit.hh
	       $(CCC) $(CCFLAGS) $(INC) -o server \
	server.cpp server_i.cpp cubit_s.cc cubit_c.cc cubit_impl.cc  \
	$(LIBS) $(OSLIBS)

cubit.hh:      cubit.idl
	       $(PREPRO) cubit.idl

clean:
	       rm -f client server cubit.hh *_s.cc *_c.cc *.o;
	rm -rf Templates.DB; rm -f *~

.SUFFIXES: .cc

.cc.a:
	       $(CCC) -c $(CCFLAGS) $<
	       $(AR) $(ARFLAGS) $@ $*.o
	       rm -f $*.o

.cc:
	       $(CCC) $(CCFLAGS) $(LDFLAGS) $< -o $@

