--- orig/MessagingS.cpp	Fri Apr 28 16:44:03 2000
+++ MessagingS.cpp	Fri Apr 28 21:26:26 2000
@@ -1,4 +1,4 @@
-/* -*- C++ -*- $Id$ */
+/* -*- C++ -*- $Id$ */
 
 // ******  Code generated by the The ACE ORB (TAO) IDL Compiler *******
 // TAO and the TAO IDL Compiler have been developed by the Center for
@@ -7,12 +7,26 @@
 // Information about TAO is available at:
 //                 http://www.cs.wustl.edu/~schmidt/TAO.html
 
-#include "MessagingS.h"
+#include "tao/orbconf.h"
+
+#if (TAO_HAS_CORBA_MESSAGING == 1)
+
+#include "tao/MessagingS.h"
+#include "tao/POA_CORBA.h"
+#include "tao/Operation_Table.h"
+#include "tao/Server_Request.h"
+#include "tao/Stub.h"
+#include "tao/ORB_Core.h"
+#include "tao/Object_Adapter.h"
 
 #if !defined (__ACE_INLINE__)
-#include "MessagingS.i"
+#include "tao/MessagingS.i"
 #endif /* !defined INLINE */
 
+ACE_RCSID(tao, MessagingS, "$Id$")
+
+#if (TAO_HAS_AMI_CALLBACK == 1) || (TAO_HAS_AMI_POLLER == 1)
+
 class TAO_Messaging_ReplyHandler_Perfect_Hash_OpTable : public TAO_Perfect_Hash_OpTable
 {
 private:
@@ -20,7 +34,7 @@
 public:
  const TAO_operation_db_entry * lookup (const char *str, unsigned int len);
 };
-/* starting time is 16:44:03 */
+/* starting time is 14:51:17 */
 /* C++ code produced by gperf version 2.8 (ACE version) */
 /* Command-line: /export/kelvar/coryan/head/ACE_wrappers/build/Linux/bin/gperf -m -M -J -c -C -D -E -T -f 0 -F 0 -a -o -t -p -K opname_ -L C++ -Z TAO_Messaging_ReplyHandler_Perfect_Hash_OpTable -N lookup  */
 unsigned int
@@ -110,7 +124,7 @@
     }
   return 0;
 }
-/* ending time is 16:44:03 */
+/* ending time is 14:51:17 */
 static TAO_Messaging_ReplyHandler_Perfect_Hash_OpTable tao_Messaging_ReplyHandler_optable;
 
 Messaging::ReplyHandler_ptr _TAO_collocation_POA_Messaging_ReplyHandler_Stub_Factory (
@@ -118,7 +132,7 @@
   )
 {
   TAO_Stub *stub = obj->_stubobj ();
-  
+
   switch (stub->servant_orb_var ()->orb_core ()->get_collocation_strategy ())
     {
     case TAO_ORB_Core::THRU_POA:
@@ -156,14 +170,14 @@
 int _TAO_collocation_POA_Messaging_ReplyHandler_Stub_Factory_Initializer (long dummy)
 {
   ACE_UNUSED_ARG (dummy);
-  
-  _TAO_collocation_Messaging_ReplyHandler_Stub_Factory_function_pointer = 
+
+  _TAO_collocation_Messaging_ReplyHandler_Stub_Factory_function_pointer =
     _TAO_collocation_POA_Messaging_ReplyHandler_Stub_Factory;
-  
+
   return 0;
 }
 
-static int _TAO_collocation_POA_Messaging_ReplyHandler_Stub_Factory_Initializer_Scarecrow = 
+static int _TAO_collocation_POA_Messaging_ReplyHandler_Stub_Factory_Initializer_Scarecrow =
   _TAO_collocation_POA_Messaging_ReplyHandler_Stub_Factory_Initializer (ACE_reinterpret_cast (long, _TAO_collocation_POA_Messaging_ReplyHandler_Stub_Factory_Initializer));
 
 // skeleton constructor
@@ -183,7 +197,7 @@
 }
 
 void POA_Messaging::ReplyHandler::_is_a_skel (
-    CORBA::ServerRequest &_tao_server_request, 
+    CORBA::ServerRequest &_tao_server_request,
     void * _tao_object_reference,
     void * /* context */,
     CORBA::Environment &ACE_TRY_ENV
@@ -195,10 +209,10 @@
   CORBA::String_var value;
   if (!((_tao_in >> value.out ())))
     ACE_THROW (CORBA::MARSHAL ());
-  
+
   _tao_retval = _tao_impl->_is_a (value.in (), ACE_TRY_ENV);
   ACE_CHECK;
-  
+
   _tao_server_request.init_reply (ACE_TRY_ENV);
   ACE_CHECK;
   TAO_OutputCDR &_tao_out = _tao_server_request.outgoing ();
@@ -207,7 +221,7 @@
 }
 
 void POA_Messaging::ReplyHandler::_non_existent_skel (
-    CORBA::ServerRequest &_tao_server_request, 
+    CORBA::ServerRequest &_tao_server_request,
     void * _tao_object_reference,
     void * /* context */,
     CORBA::Environment &ACE_TRY_ENV
@@ -216,7 +230,7 @@
   POA_Messaging::ReplyHandler *_tao_impl = (POA_Messaging::ReplyHandler *) _tao_object_reference;
   CORBA::Boolean _tao_retval = _tao_impl->_non_existent (ACE_TRY_ENV);
   ACE_CHECK;
-  
+
   _tao_server_request.init_reply (ACE_TRY_ENV);
   ACE_CHECK;
   TAO_OutputCDR &_tao_out = _tao_server_request.outgoing ();
@@ -395,6 +409,6 @@
   return this->servant_->_non_existent (ACE_TRY_ENV);
 }
 
+#endif /* TAO_HAS_AMI_CALLBACK == 1 || TAO_HAS_AMI_POLLER == 1 */
 
-
-
+#endif /* TAO_HAS_CORBA_MESSAGING == 1 */
