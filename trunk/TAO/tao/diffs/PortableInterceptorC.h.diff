--- orig/PortableInterceptorC.h	Mon Apr 16 22:50:48 2001
+++ PortableInterceptorC.h	Mon Apr 16 23:01:28 2001
@@ -1,6 +1,6 @@
 // -*- C++ -*-
 //
-// $Id$
+// $Id$
 
 // ****  Code generated by the The ACE ORB (TAO) IDL Compiler ****
 // TAO and the TAO IDL Compiler have been developed by:
@@ -19,19 +19,21 @@
 // Information about TAO is available at:
 //     http://www.cs.wustl.edu/~schmidt/TAO.html
 
-#ifndef _TAO_IDL_ORIG_PORTABLEINTERCEPTORC_H_
-#define _TAO_IDL_ORIG_PORTABLEINTERCEPTORC_H_
+#ifndef _TAO_IDL_PORTABLEINTERCEPTORC_H_
+#define _TAO_IDL_PORTABLEINTERCEPTORC_H_
 
 #include "ace/pre.h"
-#include "tao/corba.h"
+
+#include "corbafwd.h"
 
 #if !defined (ACE_LACKS_PRAGMA_ONCE)
 # pragma once
 #endif /* ACE_LACKS_PRAGMA_ONCE */
 
-#include "tao/corbafwd.h"
 #include "DynamicC.h"
 #include "MessagingC.h"
+#include "CurrentC.h"
+#include "IOPC.h"
 
 #if defined (TAO_EXPORT_MACRO)
 #undef TAO_EXPORT_MACRO
@@ -164,16 +166,14 @@
       }
 
     virtual char * name (
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        TAO_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
       )) = 0;
 
     virtual void destroy (
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        TAO_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
@@ -624,6 +624,8 @@
         CORBA::SystemException
       )) = 0;
 
+#if TAO_HAS_CORBA_MESSAGING == 1
+
     virtual Messaging::SyncScope sync_scope (
         CORBA::Environment &ACE_TRY_ENV = 
           TAO_default_environment ()
@@ -632,6 +634,8 @@
         CORBA::SystemException
       )) = 0;
 
+#endif  /* TAO_HAS_CORBA_MESSAGING == 1 */
+
     virtual PortableInterceptor::ReplyStatus reply_status (
         CORBA::Environment &ACE_TRY_ENV = 
           TAO_default_environment ()
@@ -1188,9 +1192,8 @@
       }
 
     virtual void send_request (
-        PortableInterceptor::ClientRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ClientRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -1198,27 +1201,24 @@
       )) = 0;
 
     virtual void send_poll (
-        PortableInterceptor::ClientRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ClientRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
       )) = 0;
 
     virtual void receive_reply (
-        PortableInterceptor::ClientRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ClientRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
       )) = 0;
 
     virtual void receive_exception (
-        PortableInterceptor::ClientRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ClientRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -1226,9 +1226,8 @@
       )) = 0;
 
     virtual void receive_other (
-        PortableInterceptor::ClientRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ClientRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -1357,9 +1356,8 @@
       }
 
     virtual void receive_request_service_contexts (
-        PortableInterceptor::ServerRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ServerRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -1367,9 +1365,8 @@
       )) = 0;
 
     virtual void receive_request (
-        PortableInterceptor::ServerRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ServerRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -1377,18 +1374,16 @@
       )) = 0;
 
     virtual void send_reply (
-        PortableInterceptor::ServerRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ServerRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
       )) = 0;
 
     virtual void send_exception (
-        PortableInterceptor::ServerRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ServerRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -1396,9 +1391,8 @@
       )) = 0;
 
     virtual void send_other (
-        PortableInterceptor::ServerRequestInfo_ptr ri,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ServerRequestInfo_ptr ri
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -1676,9 +1670,8 @@
       }
 
     virtual void establish_components (
-        PortableInterceptor::IORInfo_ptr info,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::IORInfo_ptr info
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
@@ -1807,9 +1800,8 @@
 
     virtual CORBA::Policy_ptr create_policy (
         CORBA::PolicyType type,
-        const CORBA::Any & value,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        const CORBA::Any & value
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException,
@@ -2241,18 +2233,16 @@
       }
 
     virtual void pre_init (
-        PortableInterceptor::ORBInitInfo_ptr info,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ORBInitInfo_ptr info
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
       )) = 0;
 
     virtual void post_init (
-        PortableInterceptor::ORBInitInfo_ptr info,
-        CORBA::Environment &ACE_TRY_ENV = 
-          TAO_default_environment ()
+        PortableInterceptor::ORBInitInfo_ptr info
+        TAO_ENV_ARG_DECL_WITH_DEFAULTS
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
@@ -2274,6 +2264,11 @@
 
 #endif /* end #if !defined */
 
+/// Register an ORBInitializer with the global ORBInitializer
+/// table.
+TAO_NAMESPACE_STORAGE_CLASS void register_orb_initializer (
+  ORBInitializer_ptr init,
+  CORBA::Environment &ACE_TRY_ENV = TAO_default_environment ());
 
 }
 TAO_NAMESPACE_CLOSE // module PortableInterceptor
