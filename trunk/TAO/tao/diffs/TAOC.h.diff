--- orig/TAOC.h	Fri Apr 28 18:04:26 2000
+++ tmp/TAOC.h	Fri Apr 28 18:17:11 2000
@@ -9,20 +9,22 @@
 
 #ifndef _TAO_IDL_ORIG_TAOC_H_
 #define _TAO_IDL_ORIG_TAOC_H_
+#include "ace/pre.h"
 
-#include "tao/corba.h"
-
-#if defined (ACE_HAS_MINIMUM_IOSTREAMH_INCLUSION)
-#include "ace/streams.h"
-#endif /* ACE_HAS_MINIMUM_IOSTREAMH_INCLUSION */
+#include "tao/corbafwd.h"
 
 #if !defined (ACE_LACKS_PRAGMA_ONCE)
 # pragma once
 #endif /* ACE_LACKS_PRAGMA_ONCE */
 
-#include "tao/corbafwd.h"
-#include "PolicyC.h"
-#include "TimeBaseC.h"
+#if (TAO_HAS_CLIENT_PRIORITY_POLICY == 1 || \
+     TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1)
+
+#include "tao/PolicyC.h"
+#include "tao/TimeBaseC.h"
+
+#endif /* TAO_HAS_CLIENT_PRIORITY_POLICY == 1 ||
+          TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1 */
 
 #if defined (TAO_EXPORT_MACRO)
 #undef TAO_EXPORT_MACRO
@@ -45,6 +47,9 @@
 
 TAO_NAMESPACE  TAO
 {
+
+#if (TAO_HAS_CLIENT_PRIORITY_POLICY == 1)
+
   typedef CORBA::Short PrioritySelectionMode;
   typedef CORBA::Short_out PrioritySelectionMode_out;
     TAO_NAMESPACE_STORAGE_CLASS CORBA::TypeCode_ptr _tc_PrioritySelectionMode;
@@ -57,7 +62,7 @@
 
   struct PrioritySpecification;
   class PrioritySpecification_var;
-  
+
   struct TAO_Export PrioritySpecification
   {
 
@@ -80,18 +85,18 @@
     PrioritySpecification_var (const PrioritySpecification_var &); // copy constructor
     PrioritySpecification_var (const PrioritySpecification &); // fixed-size types only
     ~PrioritySpecification_var (void); // destructor
-    
+
     PrioritySpecification_var &operator= (PrioritySpecification *);
     PrioritySpecification_var &operator= (const PrioritySpecification_var &);
     PrioritySpecification_var &operator= (const PrioritySpecification &); // fixed-size types only
     PrioritySpecification *operator-> (void);
     const PrioritySpecification *operator-> (void) const;
-    
+
     operator const PrioritySpecification &() const;
     operator PrioritySpecification &();
     operator PrioritySpecification &() const;
-    
-    // in, inout, out, _retn 
+
+    // in, inout, out, _retn
     const PrioritySpecification &in (void) const;
     PrioritySpecification &inout (void);
     PrioritySpecification &out (void);
@@ -114,7 +119,7 @@
 
   class ClientPriorityPolicy;
   typedef ClientPriorityPolicy *ClientPriorityPolicy_ptr;
-  
+
 #endif /* end #if !defined */
 
 
@@ -128,14 +133,14 @@
     ClientPriorityPolicy_var (ClientPriorityPolicy_ptr);
     ClientPriorityPolicy_var (const ClientPriorityPolicy_var &); // copy constructor
     ~ClientPriorityPolicy_var (void); // destructor
-    
+
     ClientPriorityPolicy_var &operator= (ClientPriorityPolicy_ptr);
     ClientPriorityPolicy_var &operator= (const ClientPriorityPolicy_var &);
     ClientPriorityPolicy_ptr operator-> (void) const;
-    
+
     operator const ClientPriorityPolicy_ptr &() const;
     operator ClientPriorityPolicy_ptr &();
-    // in, inout, out, _retn 
+    // in, inout, out, _retn
     ClientPriorityPolicy_ptr in (void) const;
     ClientPriorityPolicy_ptr &inout (void);
     ClientPriorityPolicy_ptr &out (void);
@@ -165,7 +170,7 @@
     operator ClientPriorityPolicy_ptr &();
     ClientPriorityPolicy_ptr &ptr (void);
     ClientPriorityPolicy_ptr operator-> (void);
-    
+
   private:
     ClientPriorityPolicy_ptr &ptr_;
   };
@@ -189,12 +194,12 @@
     static ClientPriorityPolicy_ptr _duplicate (ClientPriorityPolicy_ptr obj);
     static ClientPriorityPolicy_ptr _narrow (
         CORBA::Object_ptr obj,
-        CORBA::Environment &ACE_TRY_ENV = 
+        CORBA::Environment &ACE_TRY_ENV =
           TAO_default_environment ()
       );
     static ClientPriorityPolicy_ptr _unchecked_narrow (
         CORBA::Object_ptr obj,
-        CORBA::Environment &ACE_TRY_ENV = 
+        CORBA::Environment &ACE_TRY_ENV =
           TAO_default_environment ()
       );
     static ClientPriorityPolicy_ptr _nil (void)
@@ -203,7 +208,7 @@
       }
 
     virtual TAO::PrioritySpecification priority_specification (
-        CORBA::Environment &ACE_TRY_ENV = 
+        CORBA::Environment &ACE_TRY_ENV =
           TAO_default_environment ()
       )
       ACE_THROW_SPEC ((
@@ -211,7 +216,7 @@
       )) = 0;
 
     virtual void *_tao_QueryInterface (ptr_arith_t type);
-    
+
     virtual const char* _interface_repository_id (void) const;
 
   protected:
@@ -225,6 +230,10 @@
 
 #endif /* end #if !defined */
 
+#endif /* TAO_HAS_CLIENT_PRIORITY_POLICY == 1 */
+
+#if (TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1)
+
   typedef CORBA::UShort BufferingConstraintMode;
   typedef CORBA::UShort_out BufferingConstraintMode_out;
     TAO_NAMESPACE_STORAGE_CLASS CORBA::TypeCode_ptr _tc_BufferingConstraintMode;
@@ -239,7 +248,7 @@
 
   struct BufferingConstraint;
   class BufferingConstraint_var;
-  
+
   struct TAO_Export BufferingConstraint
   {
 
@@ -263,18 +272,18 @@
     BufferingConstraint_var (const BufferingConstraint_var &); // copy constructor
     BufferingConstraint_var (const BufferingConstraint &); // fixed-size types only
     ~BufferingConstraint_var (void); // destructor
-    
+
     BufferingConstraint_var &operator= (BufferingConstraint *);
     BufferingConstraint_var &operator= (const BufferingConstraint_var &);
     BufferingConstraint_var &operator= (const BufferingConstraint &); // fixed-size types only
     BufferingConstraint *operator-> (void);
     const BufferingConstraint *operator-> (void) const;
-    
+
     operator const BufferingConstraint &() const;
     operator BufferingConstraint &();
     operator BufferingConstraint &() const;
-    
-    // in, inout, out, _retn 
+
+    // in, inout, out, _retn
     const BufferingConstraint &in (void) const;
     BufferingConstraint &inout (void);
     BufferingConstraint &out (void);
@@ -297,7 +306,7 @@
 
   class BufferingConstraintPolicy;
   typedef BufferingConstraintPolicy *BufferingConstraintPolicy_ptr;
-  
+
 #endif /* end #if !defined */
 
 
@@ -311,14 +320,14 @@
     BufferingConstraintPolicy_var (BufferingConstraintPolicy_ptr);
     BufferingConstraintPolicy_var (const BufferingConstraintPolicy_var &); // copy constructor
     ~BufferingConstraintPolicy_var (void); // destructor
-    
+
     BufferingConstraintPolicy_var &operator= (BufferingConstraintPolicy_ptr);
     BufferingConstraintPolicy_var &operator= (const BufferingConstraintPolicy_var &);
     BufferingConstraintPolicy_ptr operator-> (void) const;
-    
+
     operator const BufferingConstraintPolicy_ptr &() const;
     operator BufferingConstraintPolicy_ptr &();
-    // in, inout, out, _retn 
+    // in, inout, out, _retn
     BufferingConstraintPolicy_ptr in (void) const;
     BufferingConstraintPolicy_ptr &inout (void);
     BufferingConstraintPolicy_ptr &out (void);
@@ -348,7 +357,7 @@
     operator BufferingConstraintPolicy_ptr &();
     BufferingConstraintPolicy_ptr &ptr (void);
     BufferingConstraintPolicy_ptr operator-> (void);
-    
+
   private:
     BufferingConstraintPolicy_ptr &ptr_;
   };
@@ -372,12 +381,12 @@
     static BufferingConstraintPolicy_ptr _duplicate (BufferingConstraintPolicy_ptr obj);
     static BufferingConstraintPolicy_ptr _narrow (
         CORBA::Object_ptr obj,
-        CORBA::Environment &ACE_TRY_ENV = 
+        CORBA::Environment &ACE_TRY_ENV =
           TAO_default_environment ()
       );
     static BufferingConstraintPolicy_ptr _unchecked_narrow (
         CORBA::Object_ptr obj,
-        CORBA::Environment &ACE_TRY_ENV = 
+        CORBA::Environment &ACE_TRY_ENV =
           TAO_default_environment ()
       );
     static BufferingConstraintPolicy_ptr _nil (void)
@@ -386,7 +395,7 @@
       }
 
     virtual TAO::BufferingConstraint buffering_constraint (
-        CORBA::Environment &ACE_TRY_ENV = 
+        CORBA::Environment &ACE_TRY_ENV =
           TAO_default_environment ()
       )
       ACE_THROW_SPEC ((
@@ -394,7 +403,7 @@
       )) = 0;
 
     virtual void *_tao_QueryInterface (ptr_arith_t type);
-    
+
     virtual const char* _interface_repository_id (void) const;
 
   protected:
@@ -408,26 +417,44 @@
 
 #endif /* end #if !defined */
 
+#endif /* TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1 */
 
 }
 TAO_NAMESPACE_CLOSE // module TAO
 
+#if (TAO_HAS_CLIENT_PRIORITY_POLICY == 1)
+
 TAO_Export void operator<<= (CORBA::Any &, const TAO::PrioritySpecification &); // copying version
 TAO_Export void operator<<= (CORBA::Any &, TAO::PrioritySpecification*); // noncopying version
 TAO_Export CORBA::Boolean operator>>= (const CORBA::Any &, TAO::PrioritySpecification *&); // deprecated
 TAO_Export CORBA::Boolean operator>>= (const CORBA::Any &, const TAO::PrioritySpecification *&);
+#endif /* TAO_HAS_CLIENT_PRIORITY_POLICY == 1 */
+
+#if (TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1)
+
 TAO_Export void operator<<= (CORBA::Any &, const TAO::BufferingConstraint &); // copying version
 TAO_Export void operator<<= (CORBA::Any &, TAO::BufferingConstraint*); // noncopying version
 TAO_Export CORBA::Boolean operator>>= (const CORBA::Any &, TAO::BufferingConstraint *&); // deprecated
 TAO_Export CORBA::Boolean operator>>= (const CORBA::Any &, const TAO::BufferingConstraint *&);
 
+#endif /* TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1 */
+
 #ifndef __ACE_INLINE__
 
+#if (TAO_HAS_CLIENT_PRIORITY_POLICY == 1)
+
 TAO_Export CORBA::Boolean operator<< (TAO_OutputCDR &, const TAO::PrioritySpecification &);
 TAO_Export CORBA::Boolean operator>> (TAO_InputCDR &, TAO::PrioritySpecification &);
+
+#endif /* TAO_HAS_CLIENT_PRIORITY_POLICY == 1 */
+
+#if (TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1)
+
 TAO_Export CORBA::Boolean operator<< (TAO_OutputCDR &, const TAO::BufferingConstraint &);
 TAO_Export CORBA::Boolean operator>> (TAO_InputCDR &, TAO::BufferingConstraint &);
 
+#endif /* TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1 */
+
 #endif /* __ACE_INLINE__ */
 
 
@@ -439,4 +466,5 @@
 #pragma warning(pop)
 #endif /* _MSC_VER */
 
+#include "ace/post.h"
 #endif /* ifndef */
