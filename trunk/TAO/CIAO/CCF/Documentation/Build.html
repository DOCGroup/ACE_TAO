<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--

file      : Documentation/Build.html
author    : Boris Kolpackov <boris@dre.vanderbilt.edu>
cvs-id    : $Id$
-->

<html>

<head>

  <title>Building CCF Libraries</title>

  <meta name="author" content="Boris Kolpackov"/>
  <meta name="keywords" content="build,compile,make,CCF,CORBA,compiler,framework,library"/>
  <meta name="description" content="Building CCF Libraries"/>
  <meta http-equiv="Content-Language" content="en"/>

  <style type="text/css">
  body {
    font-family      : sans-serif;

    color            : black;
    background       : white;

    max-width        : 40em;
    padding          : 2em 2em 2em 3em;
    margin           : 0 0 0 0;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family      : sans-serif;
    font-weight      : 500;
  }

  h1 { font-size     : 170%; }
  h2 { font-size     : 125%; }

  ul.toc li {
    padding          : .4em 0em 0em 0em;
  }

  ol.multiline li {
    padding-top      : 0.6em;
    padding-bottom   : 0.6em;
  }

  </style>

</head>

<body>

<ul class="toc">
<li><a href="#debian">Debian GNU/Linux [i386.deb]</a></li>

<li><a href="#redhat">RedHat OS family [i386.rpm]</a></li>

<li><a href="#linux">Other GNU/Linux or UNIX Distributions</a>
<ul>
<li><a href="#linux_cxx">C++</a></li>
<li><a href="#linux_boost">Boost Libraries</a></li>
<li><a href="#linux_utility">Utility Library</a></li>
<li><a href="#linux_build">Building CCF</a></li>
</ul></li>

<li><a href="#windows">Windows</a>
<ul>
<li><a href="#windows_cxx">C++</a></li>
<li><a href="#windows_boost">Boost Libraries</a></li>
<li><a href="#windows_utility">Utility Library</a></li>
<li><a href="#windows_build">Building CCF</a></li>
</ul></li>
</ul>


<!-- Debian -->


<h1><a name="debian">Debian GNU/Linux [i386.deb]</a></h1>

<p>You will need to install the following packages from the
Debian package repository:

<ol>
<li><code>libboost-dev-1.30.2-2</code> or better</li>
<li><code>libboost-regex-dev-1.30.2-2</code> or better</li>
</ol>

<p>Additionally, you will need to download and and install

<ol>
<li><a href="ftp://ftp.kolpackov.net/pub/Utility/Utility-1.2/deb/libutility_1.2.2-1_i386.deb">
<code>libutility_1.2.2-1_i386.deb</code></a></li>
<li><a href="ftp://ftp.kolpackov.net/pub/Utility/Utility-1.2/deb/libutility-dev_1.2.2-1_i386.deb">
<code>libutility-dev_1.2.2-1_i386.deb</code></a></li>
</ol>

For example, if you downloaded them into <code>/tmp</code> then to
install you can issue these commands:</p>

<pre>$ cd /tmp
$ dpkg -i libutility*.deb
</pre>
</p>

<p>Now you are ready to build CCF libraries:</p>
<pre>$ cd $CIAO_ROOT/CCF/CCF
$ make
</pre>


<!-- RedHat -->


<h1><a name="redhat">RedHat OS family [i386.rpm]</a></h1>

<p>You will need to install the following RedHat packages:</p>

<ol>

<li><a href="http://www.dre.vanderbilt.edu/cidlc/prerequisites/rpm/boost-devel-1.30.2-2.i386.rpm">
<code>boost-devel-1.30.2-2.i386.rpm</code></a></li>

<li><a href="ftp://ftp.kolpackov.net/pub/Utility/Utility-1.2/rpm/Utility-1.2.2-3.i386.rpm">
<code>Utility-1.2.2-3.i386.rpm</code></a></li>
</ol>

<p>For example, if you downloaded them into <code>/usr/src/redhat/RPMS/i386
</code> then to install you can issue these commands:</p>

<pre>$ cd /usr/src/redhat/RPMS/i386
$ rpm -Uhv boost-devel-1.30.2-2.i386.rpm
$ rpm -Uhv Utility-1.2.2-3.i386.rpm
</pre>
</p>

<p>Now you are ready to build CCF libraries:</p>
<pre>$ cd $CIAO_ROOT/CCF/CCF
$ make
</pre>


<!-- Linux -->


<h1><a name="linux">Other GNU/Linux or UNIX Distributions</a></h1>

<!--

<h2><a name="linux_make">Make</a></h2>
<p>Currently in order to build CCF Libraries you will need
<a href="http://savannah.gnu.org/projects/make/">GNU make</a> 3.80 with the
following bug fixes:

<ol>
<li>
<a href="http://savannah.gnu.org/bugs/index.php?func=detailitem&item_id=1516">
eval inside condition</a></li>

<li>
<a href="http://savannah.gnu.org/bugs/index.php?func=detailitem&item_id=1517">
eval memory exhaustion</a></li>
</ol>

Your system distributor should have the recent version of make with those
fixes applied.
</p>

<p>If you are unsure whether you have those bugfixes or not then you can
just try building CCF and if you see some strange make-related errors then
you will need to upgrade.</p>

-->

<h2><a name="linux_cxx">C++</a></h2>
<p>You can use any standard-conformant C++ compiler.
<a href="http://gcc.gnu.org">GNU G++</a> 3.3 is known to work.</p>

<h2><a name="linux_boost">Boost Libraries</a></h2>
<p>In order to build CCF you will need the following libraries from the
<a href="http://www.boost.org">Boost distribution</a>:</p>

<ol>
<li>regex</li>
<li>filesystem</li>
<li>spirit parser framework</li>
</ol>

<p>There are two commonly used ways to obtain those libraries: you can get
precompiled binaries from your system distributor or download source code and
compile it yourself. The first approach is recommended where available
and if you got precompiled binaries then you can skip the rest of this
section.</p>

</p>If you choose to compile Boost Libraries yourself please refer to the
<a href="http://www.boost.org/more/getting_started.html">Boost Building
Instructions</a>.<p>

<p>After you have successfully compiled necessary libraries in the boost
distribution you need to do one more thing. Inside the boost distribution
directory (e.g. <code>boost-1.30.2</code>) create a directory with the name
<code>lib</code> and copy (or soft link) <code>libboost_filesystem.a</code>
and <code>libboost_regex.a</code> into it.</p>


<h2><a name="linux_utility">Utility Library</a></h2>

<p>Another prerequisite for CCF is
<a href="http://www.dre.vanderbilt.edu/cidlc/prerequisites/Utility-1.2.2.tar.bz2">Utility
Library</a>. You don't need to build anything in this library. Just unpack
it to some convenient place.</p>

<h2><a name="linux_build">Building CCF</a></h2>

<p>Before you can start building CCF you need to specify the location
of Boost Libraries and Utility Library. There are two ways you can do
this. The first way is to specify environment variables <code>BOOST_ROOT,
</code> <code>BOOST_INCLUDE,</code> <code>BOOST_LIB</code> and
<code>UTILITY_ROOT</code>. If <code>BOOST_INCLUDE</code> and
<code>BOOST_LIB</code> are not initialized then their values are derived
from <code>BOOST_ROOT</code> as follows:<p>

<pre>
BOOST_LIB     := $(BOOST_ROOT)/lib
BOOST_INCLUDE := $(BOOST_ROOT)
</pre>

<p>Below are some examples of how you may do that.</p>

<p>If you would like to use Boost/Utility from the build directory:</p>

<pre>$ export BOOST_ROOT=~/build/boost-1.30.2
$ export UTILITY_ROOT=~/build/Utility-1.2.2
</pre>

<p>If Boost was installed in <code>/usr/local</code> and compiler doesn't
search there by default:</p>

<pre>$ export BOOST_LIB=/usr/local/lib
$ export BOOST_INCLUDE=/usr/local/include
$ export UTILITY_ROOT=~/build/Utility-1.2.2
</pre>

<p>If Boost was installed in let's say <code>/usr/{include,lib}</code> and
compiler searches there by default you may leave <code>BOOST_*</code>
uninitialized.</p>

<p>Alternatively, you can specify values for <code>BOOST_*</code> and
<code>UTILITY_*</code> in <code>$CIAO_ROOT/CCF/Config.rules</code></p>

<p>Finally, you can start the build process:</p>

<pre>$ cd CCF/CCF
$ make</pre>


<!-- Windows -->


<h1><a name="windows">Windows</a></h1>

<h2><a name="windows_cxx">C++</a></h2>
<p>VC++ 7.1 is required to build CCF on Windows. Note that neither
VC++ 6 nor VC++ 7.0 is supported. </p>

<h2><a name="windows_boost">Boost Libraries</a></h2>
<p>In order to build CCF you will need the following libraries from
the <a href="http://www.boost.org">Boost distribution</a>:

<ol>
<li>regex</li>
<li>filesystem</li>
<li>spirit parser framework</li>
</ol>

<p>Below is the list of step-by-step instructions for building boost. As
an example, I assume that the installation directory is <code>D:\lib</code>.
</p>

<ol class="multiline">

<li>Download the latest boost source distribution from the
<a href="http://sourceforge.net/project/showfiles.php?group_id=7586">Boost web site</a>.
At the time of writing, the latest version was <code>1.30.2</code>
thus the file you download would be <code>boost-1.30.2.zip</code>. After
downloading unzip this file in <code>D:\lib</code> so that you get
<code>D:\lib\boost-1.30.2</code>.</li>


<li>Download the latest pre-built
<a href="http://sourceforge.net/project/showfiles.php?group_id=7586&package_id=72941">
<code>boost-jam</code></a>. At the time of writing, the latest version was
<code>3.1.7</code> thus the file you download would be
<code>bjam-3.1.7-ntx86.zip</code>. Unzip this file in <code>D:\lib</code> so
that you get <code>D:\lib\bin.ntx86\bjam.exe</code>.</li>

<li>Open a command prompt and <code>cd D:\lib\boost-1.30.2</code>. Then
issue the following command.

<pre>D:\lib\bin.ntx86\bjam.exe "-sTOOLS=vc7.1"
</pre>
</li>

<li>Create a directory called <code>lib</code> in
<code>D:\lib\boost-1.30.2</code>.</li>

<li>Copy <code>D:\lib\boost-1.30.2\libs\filesystem\build\bin\libboost_filesystem.lib\vc7.1\debug\runtime-link-dynamic\libboost_filesystem.lib</code>
to <code>D:\lib\boost-1.30.2\lib\libboost_filesystem_debug.lib</code>.<br>
(Don't ask me who came up with this directory structure ;-)
</li>

<li>Copy <code>D:\lib\boost-1.30.2\libs\regex\build\bin\libboost_regex.lib\vc7.1\debug\runtime-link-dynamic\libboost_regex.lib</code>
to <code>D:\lib\boost-1.30.2\lib\libboost_regex_debug.lib</code>.
</li>

<li>Add <code>D:\lib\boost-1.30.2</code> to your VC7.1 include directory
search list (Go to Tools -> Options -> Projects -> VC++ Directories -> Include Files).
Add <code>D:\lib\boost-1.30.2\lib</code> to your VC7.1 library directory
search list.</li>

</ol>

<p>Please refer to the
<a href="http://www.boost.org/more/getting_started.html">Boost Building
Instructions</a> if you have any questions.<p>


<h2><a name="windows_utility">Utility Library</a></h2>

<p>Another prerequisite for CCF is
<a href="http://www.dre.vanderbilt.edu/cidlc/prerequisites/Utility-1.2.2.tar.bz2">Utility
Library</a>. You don't need to build anything in this library. Just unpack
it to some convenient place and add it to your VC7.1 include directory search
list. For example if you unpacked <code>Utility-1.2.2.tar.bz2</code> in
<code>D:\lib</code> then add <code>D:\lib\Utility-1.2.2</code> to your
search list.</p>


<h2><a name="windows_build">Building CCF</a></h2>

<p>Now you are ready to build CCF libraries. Just open VC7.1 solution file
in <code>CCF\CCF\</code> and proceed as usual.</p>
</body>
</html>
