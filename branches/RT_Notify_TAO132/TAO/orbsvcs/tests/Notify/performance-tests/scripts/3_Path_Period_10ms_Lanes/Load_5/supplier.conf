## $Id$
## This file has the following configuration:
## EventChannel ec1 with 1 Thread
## SupplierAdmim sa1 with 1 Thread
## SupplierAdmin sa2
## 
## Supplier s1 has 1 Thread and is connected to sa1
## Supplier s2 is connected to sa1
## 
## Supplier s3 is connected to sa2
## 

##---- Load the Factories------
dynamic TAO_RT_ORB_Loader Service_Object *TAO_RTCORBA:_make_TAO_RT_ORB_Loader () "-ORBSchedPolicy SCHED_FIFO -ORBScopePolicy PROCESS -ORBPriorityMapping direct"

dynamic TAO_NS_RT_Application_Command_Factory Service_Object * TAO_RT_NotifyTests:_make_TAO_NS_RT_Application_Command_Factory () ""
##dynamic TAO_NS_Application_Command_Factory Service_Object * TAO_NotifyTests:_make_TAO_NS_Application_Command_Factory () ""
dynamic TAO_NS_EventChannel_Command_Factory Service_Object *TAO_NotifyTests:_make_TAO_NS_EventChannel_Command_Factory () ""
dynamic TAO_NS_SupplierAdmin_Command_Factory Service_Object* TAO_NotifyTests:_make_TAO_NS_SupplierAdmin_Command_Factory () ""

dynamic TAO_NS_Periodic_Supplier_Command_Factory Service_Object* TAO_NotifyTests:_make_TAO_NS_Periodic_Supplier_Command_Factory () ""

##------- Init the Application Object ----------
static Command_Builder "Application -Init"

##------- Create Event Channel ---------------
static Command_Builder "EventChannel -Create ec1 NotifyEventChannelFactory"
static Command_Builder "EventChannel -Set_QoS ec1 -ThreadPoolLanes 5 -Lane 1 1 0 -Lane 50 1 0 -Lane 20 1 0 -Lane 60 1 0 -Lane 90 1 0"

### --- Create Supplier Admin 1 ----
static Command_Builder "SupplierAdmin -Create sa1 ec1 -AND_OP"

### --- Create Supplier s1 connected to sa1. -----
static Command_Builder "PeriodicSupplier -Create s_low -Admin sa1 -EventType L -Priority 20 -Period 10000 -Iter 50000 -Load 5 -RunTime 15"

### --- Create Supplier s2 connected to sa1 ----
static Command_Builder "PeriodicSupplier -Create s_med -Admin sa1 -EventType M -Priority 60 -Period 10000 -Iter 50000 -Load 5 -RunTime 15"

### --- Create Supplier s3 connected to sa1 ----
static Command_Builder "PeriodicSupplier -Create s_high -Admin sa1 -EventType H -Priority 90 -Period 10000 -Iter 50000 -Load 5 -RunTime 15"

##--------- Run -------------
static Command_Builder "Application -WaitToStart"
static Command_Builder "Application -Run"
static Command_Builder "Application -WaitForEvents"
static Command_Builder "Application -DumpStats"
static Command_Builder "Application -Shutdown"

