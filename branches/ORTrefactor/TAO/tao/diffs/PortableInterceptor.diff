--- orig/PortableInterceptorC.h	2003-12-24 08:19:51.000000000 -0600
+++ PortableInterceptorC.h	2004-01-01 00:05:09.000000000 -0600
@@ -1,6 +1,6 @@
 // -*- C++ -*-
 //
-// $Id$
+// $Id$
 
 // ****  Code generated by the The ACE ORB (TAO) IDL Compiler ****
 // TAO and the TAO IDL Compiler have been developed by:
@@ -31,24 +31,16 @@
 #ifndef _TAO_IDL_ORIG_PORTABLEINTERCEPTORC_H_
 #define _TAO_IDL_ORIG_PORTABLEINTERCEPTORC_H_
 
-#include "tao/ORB.h"
+#include /**/ "ace/pre.h"
+
+#include "PI_ForwardC.h"
 
 #if !defined (ACE_LACKS_PRAGMA_ONCE)
 # pragma once
 #endif /* ACE_LACKS_PRAGMA_ONCE */
-
-#include "tao/CDR.h"
-#include "tao/Environment.h"
-#include "tao/Object.h"
-#include "tao/Any.h"
-#include "tao/Objref_VarOut_T.h"
-
-#include "PI_ForwardC.h"
-#include "CurrentC.h"
-#include "DynamicC.h"
-#include "Messaging_SyncScopeC.h"
-#include "IOP_CodecC.h"
-#include "IOP_IORC.h"
+#include "tao/Messaging_SyncScopeC.h"
+#include "tao/IOP_CodecC.h"
+#include "tao/PolicyC.h"
 
 #if defined (TAO_EXPORT_MACRO)
 #undef TAO_EXPORT_MACRO
@@ -73,6 +65,15 @@
 #pragma option push -w-rvl -w-rch -w-ccc -w-inl
 #endif /* __BORLANDC__ */
 
+// Hand crafted, keeps DynamicC.h and Typecode.h out of header files.
+namespace Dynamic
+{
+  class ParameterList;
+  class ExceptionList;
+  typedef CORBA::StringSeq ContextList;
+  typedef CORBA::StringSeq RequestContext;
+}
+
 // TAO_IDL - Generated from 
 // be/be_visitor_root/root_ch.cpp:63
 
@@ -1292,16 +1293,19 @@
     
     // TAO_IDL - Generated from
     // be/be_visitor_operation/operation_ch.cpp:46
+#if TAO_HAS_EXTENDED_FT_INTERCEPTORS == 1
     
     virtual void tao_ft_interception_point (
-        PortableInterceptor::ServerRequestInfo_ptr ri,
-        CORBA::OctetSeq_out os
-        ACE_ENV_ARG_DECL_WITH_DEFAULTS
+        PortableInterceptor::ServerRequestInfo_ptr ,
+        CORBA::OctetSeq_out 
+        ACE_ENV_ARG_DECL_NOT_USED
       )
       ACE_THROW_SPEC ((
         CORBA::SystemException
         , PortableInterceptor::ForwardRequest
-      )) = 0;
+        )) {}
+
+#endif /*TAO_HAS_EXTENDED_FT_INTERCEPTORS*/
     
     // TAO_IDL - Generated from
     // be/be_visitor_operation/operation_ch.cpp:46
@@ -1462,6 +1466,16 @@
         , CORBA::PolicyError
       )) = 0;
     
+    // Hand-crafted addition.
+    virtual ::CORBA::Policy_ptr _create_policy (
+        CORBA::PolicyType type
+        ACE_ENV_ARG_DECL_WITH_DEFAULTS
+      )
+      ACE_THROW_SPEC ((
+        CORBA::SystemException
+        , CORBA::PolicyError
+      ));
+
     // TAO_IDL - Generated from
     // be/be_visitor_interface/interface_ch.cpp:196
     
@@ -2121,27 +2135,6 @@
 
 #endif /* end #if !defined */
 
-#if !defined (_PORTABLEINTERCEPTOR_IORINTERCEPTOR__TRAITS_CH_)
-#define _PORTABLEINTERCEPTOR_IORINTERCEPTOR__TRAITS_CH_
-  
-  ACE_TEMPLATE_SPECIALIZATION
-  struct TAO_Export Objref_Traits<PortableInterceptor::IORInterceptor>
-  {
-    static PortableInterceptor::IORInterceptor_ptr tao_duplicate (
-        PortableInterceptor::IORInterceptor_ptr
-      );
-    static void tao_release (
-        PortableInterceptor::IORInterceptor_ptr
-      );
-    static PortableInterceptor::IORInterceptor_ptr tao_nil (void);
-    static CORBA::Boolean tao_marshal (
-        PortableInterceptor::IORInterceptor_ptr p,
-        TAO_OutputCDR & cdr
-      );
-  };
-
-#endif /* end #if !defined */
-
 #if !defined (_PORTABLEINTERCEPTOR_ORBINITINFO__TRAITS_CH_)
 #define _PORTABLEINTERCEPTOR_ORBINITINFO__TRAITS_CH_
   
@@ -2229,5 +2222,6 @@
 #pragma option pop
 #endif /* __BORLANDC__ */
 
-#endif /* ifndef */
+#include /**/ "ace/post.h"
 
+#endif /* ifndef */
--- orig/PortableInterceptorC.i	2003-12-24 08:19:51.000000000 -0600
+++ PortableInterceptorC.i	2003-12-23 21:29:08.000000000 -0600
@@ -1,6 +1,6 @@
 // -*- C++ -*-
 //
-// $Id$
+// $Id$
 
 // ****  Code generated by the The ACE ORB (TAO) IDL Compiler ****
 // TAO and the TAO IDL Compiler have been developed by:
--- orig/PortableInterceptorC.cpp	2003-12-24 08:19:51.000000000 -0600
+++ PortableInterceptorC.cpp	2003-12-23 21:29:08.000000000 -0600
@@ -1,6 +1,6 @@
 // -*- C++ -*-
 //
-// $Id$
+// $Id$
 
 // ****  Code generated by the The ACE ORB (TAO) IDL Compiler ****
 // TAO and the TAO IDL Compiler have been developed by:
@@ -1801,6 +1801,18 @@
     &_tc_TAO_tc_PortableInterceptor_ServerRequestInterceptor;
 }
 
+// Hand-crafted.
+
+::CORBA::Policy_ptr
+PortableInterceptor::PolicyFactory::_create_policy (CORBA::PolicyType
+                                                    ACE_ENV_ARG_DECL)
+  ACE_THROW_SPEC ((CORBA::SystemException,
+                   CORBA::PolicyError))
+{
+  ACE_THROW_RETURN (CORBA::PolicyError (CORBA::BAD_POLICY_TYPE),
+                    CORBA::Policy::_nil ());
+}
+
 // TAO_IDL - Generated from
 // be/be_visitor_interface/interface_cs.cpp:60
 
