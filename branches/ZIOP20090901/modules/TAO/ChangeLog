Tue Feb 10 10:43:32 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/GIOP_Message_Base.cpp:
      * tao/GIOP_Message_Base.h:
        Fixed error in printing consolidated messages.
        
      * tao/ZIOP/ZIOP.cpp:
        Fixed error in decompression. If there's an offset in
        ACE_Message_Block due to byte alignment, copying
        data into that ACE_Message_Block went wrong.

Tue Feb 10 08:17:32 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * orbsvcs/orbsvcs/HTIOP/HTIOP_Transport.cpp:
      * orbsvcs/orbsvcs/PortableGroup/UIPMC_Transport.cpp:
      * tao/GIOP_Message_Base.cpp:
      * tao/GIOP_Message_Base.h:
      * tao/IIOP_Transport.cpp:
      * tao/Strategies/DIOP_Transport.cpp:
      * tao/Strategies/SHMIOP_Transport.cpp:
      * tao/Synch_Invocation.cpp:
      * tao/Transport.cpp:
      * tao/Transport.h:
        Centralized compression of GIOP messages.

      * tao/ZIOP/ZIOP.cpp:
      * tao/ZIOP/ZIOP.h:
      * tao/ZIOP_Adapter.h:
        Improved error handling and logging.

Mon Feb 09 14:48:32 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/GIOP_Message_Base.cpp:
        Set giop flags before compression.
        
      * tao/Synch_Invocation.cpp:
        Log compressed data if compression succeeds
        
      * tao/ZIOP/ZIOP.cpp:
      * tao/ZIOP/ZIOP.h:
        Some changes to low value policy
        Fixed decompression. ACE_Message_Block cannot hold a large 
        number of bytes; needs a resize first.

      * tests/ZIOP/client.cpp:
      * tests/ZIOP/Hello.cpp:
      * tests/ZIOP/Hello.h:
      * tests/ZIOP/server.cpp:
      * tests/ZIOP/Test.idl:
        Expanded test with a new function. This function transfers 
        a large number of bytes.

Fri Feb 06 15:03:32 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/GIOP_Message_Base.cpp:
        Centralized ZIOP compression (On each transport 
        type(i.e. IIOP/DIOP and so on), format_message function 
        is called before a message is send.
        
      * tao/IIOP_Transport.cpp:
        Moved ZIOP compression to GIOP_Message_base.
        
      * tao/Synch_Invocation.cpp
        Changed function header for marshal_data and marshal_reply_data.
        
      * tao/ZIOP/ZIOP.cpp
        Changed function header for marshal_data and marshal_reply_data.
        Removed commented code.
        Implemented TAO_CACHED_COMPRESSION_LOW_VALUE_POLICY. 
        Added get_compression_details to TAO_ZIOP_Loader class

      * tao/ZIOP/ZIOP.h
        Changed function header for marshal_data and marshal_reply_data.
        Added get_compression_details to TAO_ZIOP_Loader class

      * tao/ZIOP_Adapter.h
        Changed function header for marshal_data and marshal_reply_data.

      * tao/ZIOP/ZIOP.pidl
        Changed defines mentioned below to meet the OMG ZIOP specification.
        ZIOP::COMPRESSION_ENABLING_POLICY_ID      =  64
        ZIOP::COMPRESSOR_ID_LEVEL_LIST_POLICY_ID  =  65
        ZIOP::COMPRESSION_LOW_VALUE_POLICY_ID     =  66
        ZIOP::COMPRESSION_MIN_RATIO_POLICY_ID     =  67
        
      * tests/ZIOP/client.cpp
        Enabled TAO_CACHED_COMPRESSION_LOW_VALUE_POLICY.
        
      * tests/ZIOP/server.cpp
        Rewritten compression policies. 
        Enabled TAO_CACHED_COMPRESSION_LOW_VALUE_POLICY.

Fri Feb 06 11:09:40 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * GIOP_Message_State.cpp
        In parse_magic_bytes, always accept GIOP or ZIOP message headers. 
        When ZIOP is used, a message is not necessarily compressed (and
        therefore a normal GIOP message).
        
Thu Feb 05 16:07:46 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/ZIOP/ZIOP.cpp:
      * tao/ZIOP/ZIOP.h:
        Rewritten compression function to prevent double
        code
      
      * tao/ZIOP_Adapter.h:
        Name change (stream into cdr)

Thu Feb 05 14:09:46 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/GIOP_Message_Base.cpp:
        Completed the circle. Reply data from a server gets decompressed 
        when received by a client.

Thu Feb 05 13:53:46 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/GIOP_Message_Base.cpp:
        Fixed logging error.
      
      * tao/IIOP_Transport.cpp:
      * tao/PortableServer/Upcall_Wrapper.cpp:
        Move compression of reply message from Upcall_Wrapper.cpp
        to IIOP_Transport.cpp.
      
      * tao/ZIOP/ZIOP.cpp:
        Fixed errors during decompression. 
        Changed marshal reply data. Marshalling of arguments
        isn't necessary anymore; just compress everything after
        the header.
        For decompress and compress, set TAO_GIOP_MESSAGE_SIZE_OFFSET 
        in order to represent the correct number of bytes.

      * tao/ZIOP/ZIOP.h:
      * tao/ZIOP_Adapter.h:
        Changed function of marshal_reply_data.
        Only TAO_OutputCDR and TAO_ORB_Core are needed here.

Tue Feb 03 12:42:46 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/GIOP_Message_Base.cpp
        Decompress input changed from TAO_ServerRequest to TAO_InputCDR.
        Added log info after decompression. The user is able to view the
        decompressed data.
        Indication whether it's a GIOP or a ZIOP message in dump_msg.
      
      * tao/Synch_Invocation.cpp
        Added log info before compression. The user is able to 
        view the data before it is compressed.
        
      * tao/ZIOP/ZIOP.cpp
        Decompress input changed from TAO_ServerRequest to TAO_InputCDR.
        Also change header into ZIOP message after compression.
        No consolidation when compression starts and setting
        the read pointer right after the GIOP header before compression.
        No marshalling of the input arguments.
     
      * tao/ZIOP/ZIOP.h
      * tao/ZIOP_Adapter.h
        Decompress input changed from TAO_ServerRequest to TAO_InputCDR.

Fri Jan 30 16:47:46 UTC 2009  Marcel Smit  <msmit@remedy.nl>

      * tao/GIOP_Message_Base.cpp:
        Moved code to decompess data to 
        process_request_message function.
      
      * tao/GIOP_Message_State.cpp:
        Magic bytes may also contain a 'Z' as first byte.
      
      * tao/Remote_Invocation.cpp:
      * tao/Synch_Invocation.cpp:
        Moved marshalling of compressed messages from 
        Remote_Invocation.cpp to Synch_Invocation.cpp.
