// $Id$
//
// ****              Code generated by the                 ****
// ****  Component Integrated ACE ORB (CIAO) CIDL Compiler ****
// CIAO has been developed by:
//       Center for Distributed Object Computing
//       Washington University
//       St. Louis, MO
//       USA
//       http://www.cs.wustl.edu/~schmidt/doc-center.html
// CIDL Compiler has been developed by:
//       Institute for Software Integrated Systems
//       Vanderbilt University
//       Nashville, TN
//       USA
//       http://www.isis.vanderbilt.edu/
//
// Information about CIAO is available at:
//    http://www.dre.vanderbilt.edu/CIAO

#include "Web_Output_Adapter_exec.h"
#include "ciao/CIAO_common.h"
#include "web_common/web_common_impl.h"

namespace CIAO
{
  namespace RACE
  {
    namespace CIDL_Web_Output_Adapter_Impl
    {
      //==================================================================
      // Facet Executor Implementation Class:   PlanEgress_exec_i
      //==================================================================

      PlanEgress_exec_i::PlanEgress_exec_i (Web_Output_Adapter_exec_i * component)
        :
        dance_output_adapter_exec_i (component)
      {
      }

      PlanEgress_exec_i::~PlanEgress_exec_i (void)
      {
      }

      // Operations from ::CIAO::RACE::PlanEgress

      ::CORBA::Boolean
      PlanEgress_exec_i::output_plan (
      const ::CIAO::RACE::Plan_Actions & plan_seq
      ACE_ENV_ARG_DECL_NOT_USED)
      ACE_THROW_SPEC ((CORBA::SystemException))
      {
        // Your code here.
        /// @TODO Please check the return value.
        if (plan_seq.length () > 0)
          return this->dance_output_adapter_exec_i->output_plan_impl (plan_seq[0].plan,
                                                                      plan_seq[0].package);
        else
          return false;
      }

      //==================================================================
      // Component Executor Implementation Class:   Web_Output_Adapter_exec_i
      //==================================================================

      Web_Output_Adapter_exec_i::Web_Output_Adapter_exec_i (void)
      {
      }

      Web_Output_Adapter_exec_i::~Web_Output_Adapter_exec_i (void)
      {
      }

      // Supported or inherited operations.

      // Attribute operations.

      // Port operations.

      ::CIAO::RACE::CCM_PlanEgress_ptr
      Web_Output_Adapter_exec_i::get_plan_egress (
      ACE_ENV_SINGLE_ARG_DECL_NOT_USED)
      ACE_THROW_SPEC ((CORBA::SystemException))
      {
        // Your code here.
        return new PlanEgress_exec_i (this);
      }

      // Operations from Components::SessionComponent

      void
      Web_Output_Adapter_exec_i::set_session_context (
      ::Components::SessionContext_ptr ctx
      ACE_ENV_ARG_DECL)
      ACE_THROW_SPEC ((
      ::CORBA::SystemException,
      ::Components::CCMException))
      {
        this->context_ =
        Web_Output_Adapter_Context::_narrow (
        ctx
        ACE_ENV_ARG_PARAMETER);
        ACE_CHECK;

        if (this->context_ == 0)
        {
          ACE_THROW (CORBA::INTERNAL ());
        }
      }

      void
      Web_Output_Adapter_exec_i::ciao_preactivate (
      ACE_ENV_SINGLE_ARG_DECL_NOT_USED)
      ACE_THROW_SPEC ((
      ::CORBA::SystemException,
      ::Components::CCMException))
      {
        // Your code here.
      }

      void
      Web_Output_Adapter_exec_i::ciao_postactivate (
      ACE_ENV_SINGLE_ARG_DECL_NOT_USED)
      ACE_THROW_SPEC ((
      ::CORBA::SystemException,
      ::Components::CCMException))
      {
        // Your code here.
      }

      void
      Web_Output_Adapter_exec_i::ccm_activate (
      ACE_ENV_SINGLE_ARG_DECL_NOT_USED)
      ACE_THROW_SPEC ((
      ::CORBA::SystemException,
      ::Components::CCMException))
      {
        // Your code here.
      }

      void
      Web_Output_Adapter_exec_i::ccm_passivate (
      ACE_ENV_SINGLE_ARG_DECL_NOT_USED)
      ACE_THROW_SPEC ((
      ::CORBA::SystemException,
      ::Components::CCMException))
      {
        // Your code here.
      }

      void
      Web_Output_Adapter_exec_i::ccm_remove (
      ACE_ENV_SINGLE_ARG_DECL_NOT_USED)
      ACE_THROW_SPEC ((
      ::CORBA::SystemException,
      ::Components::CCMException))
      {
        // Your code here.
      }

      // Implementation of facet methods
      ::CORBA::Boolean
      Web_Output_Adapter_exec_i::output_plan_impl
      (
       const ::Deployment::DeploymentPlan & plan,
       const ::Deployment::PackageConfiguration & package
       ACE_ENV_ARG_DECL_WITH_DEFAULTS
       )
        ACE_THROW_SPEC ((CORBA::SystemException))
      {
        ACE_DEBUG ((LM_DEBUG,
                    "Web_Output_Adapter_exec_i::output_plan_impl\n"));

        Web_Deployment_var ddv (new OBV_CIAO::RACE::Web_Deployment_impl (plan, package));
        ddv->controller (this->context_->get_connection_control_output ());
        this->context_->push_dance_depment (ddv.in ());
	ACE_DEBUG ((LM_DEBUG, "Web_Output_Adapter::push_dance_depment succeeded\n"));
        return true;
      }

      //==================================================================
      // Home Executor Implementation Class:   Web_Output_Adapter_Home_exec_i
      //==================================================================

      Web_Output_Adapter_Home_exec_i::Web_Output_Adapter_Home_exec_i (void)
      {
      }

      Web_Output_Adapter_Home_exec_i::~Web_Output_Adapter_Home_exec_i (void)
      {
      }

      // Supported or inherited operations.

      // Home operations.

      // Factory and finder operations.

      // Attribute operations.

      // Implicit operations.

      ::Components::EnterpriseComponent_ptr
      Web_Output_Adapter_Home_exec_i::create (
      ACE_ENV_SINGLE_ARG_DECL)
      ACE_THROW_SPEC ((
      ::CORBA::SystemException,
      ::Components::CCMException))
      {
        ::Components::EnterpriseComponent_ptr retval =
        ::Components::EnterpriseComponent::_nil ();

        ACE_NEW_THROW_EX (
        retval,
        Web_Output_Adapter_exec_i,
        CORBA::NO_MEMORY ());
        ACE_CHECK_RETURN (::Components::EnterpriseComponent::_nil ());

        return retval;
      }

      extern "C" WEB_OUTPUT_ADAPTER_EXEC_Export ::Components::HomeExecutorBase_ptr
      create_CIAO_RACE_Web_Output_Adapter_Home_Impl (void)
      {
        ::Components::HomeExecutorBase_ptr retval =
        ::Components::HomeExecutorBase::_nil ();

        ACE_NEW_RETURN (
        retval,
        Web_Output_Adapter_Home_exec_i,
        ::Components::HomeExecutorBase::_nil ());

        return retval;
      }
    }
  }
}
