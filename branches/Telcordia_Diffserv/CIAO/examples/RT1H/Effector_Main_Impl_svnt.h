// $Id$
//
// ****              Code generated by the                 ****
// ****  Component Integrated ACE ORB (CIAO) CIDL Compiler ****
// CIAO has been developed by:
//       Center for Distributed Object Computing
//       Washington University
//       St. Louis, MO
//       USA
//       http://www.cs.wustl.edu/~schmidt/doc-center.html
// CIDL Compiler has been developed by:
//       Institute for Software Integrated Systems
//       Vanderbilt University
//       Nashville, TN
//       USA
//       http://www.isis.vanderbilt.edu/
//
// Information about CIAO is available at:
//    http://www.dre.vanderbilt.edu/CIAO

#ifndef CIAO_GLUE_SESSION_EFFECTOR_MAIN_IMPL_SVNT_H
#define CIAO_GLUE_SESSION_EFFECTOR_MAIN_IMPL_SVNT_H

#include /**/ "ace/pre.h"

#include "Effector_Main_ImplEC.h"

#if !defined (ACE_LACKS_PRAGMA_ONCE)
# pragma once
#endif /* ACE_LACKS_PRAGMA_ONCE */

#include "ciao/Container_Base.h"
#include "ciao/Context_Impl_T.h"
#include "ciao/Servant_Impl_T.h"
#include "ciao/Home_Servant_Impl_T.h"

#include "Effector_MainS.h"

namespace TSCE
{
  namespace CIDL_Effector_Main_Impl
  {
    class Effector_Main_Servant;

    class EFFECTOR_MAIN_IMPL_SVNT_Export Effector_Main_Context
      : public virtual CIAO::Context_Impl<
          ::TSCE::CCM_Effector_Main_Context,
          Effector_Main_Servant,
          ::TSCE::Effector_Main,
          ::TSCE::Effector_Main_var
        >
    {
      public:
      // We will allow the servant glue code we generate to access our state.
      friend class Effector_Main_Servant;

      Effector_Main_Context (
        ::Components::CCMHome_ptr h,
        ::CIAO::Session_Container *c,
        Effector_Main_Servant *sv);

      virtual ~Effector_Main_Context (void);

      // Operations for Effector_Main receptacles and event sources,
      // defined in ::TSCE::CCM_Effector_Main_Context.

      virtual void
      push_command (
        ::TSCE::Command_Event *ev
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      virtual void
      push_status (
        ::TSCE::Status_Event *ev
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      virtual ::CUTS::Testing_Service_ptr
      get_connection_cuts_testing_service (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      // CIAO-specific.

      static Effector_Main_Context *
      _narrow (
        ::Components::SessionContext_ptr p
        ACE_ENV_ARG_DECL_WITH_DEFAULTS);

      protected:
      // Methods that manage this component's connections and consumers.

      virtual ::Components::Cookie *
      subscribe_command (
        ::TSCE::Command_EventConsumer_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      // CIAO-specific.
      ::Components::Cookie *
      subscribe_command_generic (
        ::Components::EventConsumerBase_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      virtual ::TSCE::Command_EventConsumer_ptr
      unsubscribe_command (
        ::Components::Cookie *ck
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidConnection));

      virtual ::Components::Cookie *
      subscribe_status (
        ::TSCE::Status_EventConsumer_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      // CIAO-specific.
      ::Components::Cookie *
      subscribe_status_generic (
        ::Components::EventConsumerBase_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      virtual ::TSCE::Status_EventConsumer_ptr
      unsubscribe_status (
        ::Components::Cookie *ck
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidConnection));

      virtual void
      connect_cuts_testing_service (
        ::CUTS::Testing_Service_ptr
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::AlreadyConnected,
                       ::Components::InvalidConnection));

      virtual ::CUTS::Testing_Service_ptr
      disconnect_cuts_testing_service (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::NoConnection));

      protected:
      ACE_Active_Map_Manager<
      ::TSCE::Command_EventConsumer_var>
      ciao_publishes_command_map_;

      ACE_Active_Map_Manager<
      ::Components::EventConsumerBase_var>
      ciao_publishes_command_generic_map_;

      ACE_Active_Map_Manager<
      ::TSCE::Status_EventConsumer_var>
      ciao_publishes_status_map_;

      ACE_Active_Map_Manager<
      ::Components::EventConsumerBase_var>
      ciao_publishes_status_generic_map_;

      // Simplex cuts_testing_service connection.
      ::CUTS::Testing_Service_var
      ciao_uses_cuts_testing_service_;
    };

    class EFFECTOR_MAIN_IMPL_SVNT_Export Effector_Main_Servant
      : public virtual CIAO::Servant_Impl<
          POA_TSCE::Effector_Main,
          ::TSCE::CCM_Effector_Main,
          Effector_Main_Context
        >
    {
      public:

      typedef ::TSCE::CCM_Effector_Main _exec_type;

      Effector_Main_Servant (
        ::TSCE::CCM_Effector_Main_ptr executor,
        ::Components::CCMHome_ptr h,
        const char *ins_name,
        ::CIAO::Home_Servant_Impl_Base *hs,
        ::CIAO::Session_Container *c,
        ::CIAO::REC_POL_MAP &rec_pol_map);

      virtual ~Effector_Main_Servant (void);

      virtual void
      set_attributes (
        const ::Components::ConfigValues &descr
        ACE_ENV_ARG_DECL);

      // Supported operations.

      // Public port operations.

      // Servant class for the command consumer.
      class EFFECTOR_MAIN_IMPL_SVNT_Export Command_EventConsumer_command_Servant
      : public virtual POA_TSCE::Command_EventConsumer
      {
        public:
        Command_EventConsumer_command_Servant (
          ::TSCE::CCM_Effector_Main_ptr executor,
          ::TSCE::CCM_Effector_Main_Context_ptr c);

        virtual ~Command_EventConsumer_command_Servant (void);

        virtual void
        push_Command_Event (
          ::TSCE::Command_Event *evt
          ACE_ENV_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException));

        // Inherited from ::Components::EventConsumerBase.
        virtual void
        push_event ( ::Components::EventBase *ev
                    ACE_ENV_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException,
                         ::Components::BadEventType));

        // CIAO-specific in ::Components::EventConsumerBase.
        virtual CORBA::Boolean
        ciao_is_substitutable (
          const char *event_repo_id
          ACE_ENV_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException));

        // Get component implementation.
        virtual CORBA::Object_ptr
        _get_component (
          ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException));

        protected:
        ::TSCE::CCM_Effector_Main_var
        executor_;

        ::TSCE::CCM_Effector_Main_Context_var
        ctx_;
      };

      virtual ::TSCE::Command_EventConsumer_ptr
      get_consumer_command (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      virtual ::Components::Cookie *
      subscribe_command (
        ::TSCE::Command_EventConsumer_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      // CIAO-specific.
      ::Components::Cookie *
      subscribe_command_generic (
        ::Components::EventConsumerBase_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      virtual ::TSCE::Command_EventConsumer_ptr
      unsubscribe_command (
        ::Components::Cookie *ck
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidConnection));

      // Servant class for the status consumer.
      class EFFECTOR_MAIN_IMPL_SVNT_Export Status_EventConsumer_status_Servant
      : public virtual POA_TSCE::Status_EventConsumer
      {
        public:
        Status_EventConsumer_status_Servant (
          ::TSCE::CCM_Effector_Main_ptr executor,
          ::TSCE::CCM_Effector_Main_Context_ptr c);

        virtual ~Status_EventConsumer_status_Servant (void);

        virtual void
        push_Status_Event (
          ::TSCE::Status_Event *evt
          ACE_ENV_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException));

        // Inherited from ::Components::EventConsumerBase.
        virtual void
        push_event ( ::Components::EventBase *ev
                    ACE_ENV_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException,
                         ::Components::BadEventType));

        // CIAO-specific in ::Components::EventConsumerBase.
        virtual CORBA::Boolean
        ciao_is_substitutable (
          const char *event_repo_id
          ACE_ENV_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException));

        // Get component implementation.
        virtual CORBA::Object_ptr
        _get_component (
          ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
        ACE_THROW_SPEC (( ::CORBA::SystemException));

        protected:
        ::TSCE::CCM_Effector_Main_var
        executor_;

        ::TSCE::CCM_Effector_Main_Context_var
        ctx_;
      };

      virtual ::TSCE::Status_EventConsumer_ptr
      get_consumer_status (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      virtual ::Components::Cookie *
      subscribe_status (
        ::TSCE::Status_EventConsumer_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      // CIAO-specific.
      ::Components::Cookie *
      subscribe_status_generic (
        ::Components::EventConsumerBase_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::ExceededConnectionLimit));

      virtual ::TSCE::Status_EventConsumer_ptr
      unsubscribe_status (
        ::Components::Cookie *ck
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidConnection));

      virtual void
      connect_cuts_testing_service (
        ::CUTS::Testing_Service_ptr c
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::AlreadyConnected,
                       ::Components::InvalidConnection));

      virtual ::CUTS::Testing_Service_ptr
      disconnect_cuts_testing_service (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::NoConnection));

      virtual ::CUTS::Testing_Service_ptr
      get_connection_cuts_testing_service (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      // Component attribute operations.

      // Operations for Receptacles interface.

      virtual ::Components::Cookie *
      connect (
        const char *name,
        CORBA::Object_ptr connection
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidName,
                       ::Components::InvalidConnection,
                       ::Components::AlreadyConnected,
                       ::Components::ExceededConnectionLimit));

      virtual CORBA::Object_ptr
      disconnect (
        const char *name,
        ::Components::Cookie *ck
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidName,
                       ::Components::InvalidConnection,
                       ::Components::CookieRequired,
                       ::Components::NoConnection));

      virtual ::Components::ReceptacleDescriptions *
      get_all_receptacles (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      // Operations for Events interface.

      virtual ::Components::Cookie *
      subscribe (
        const char *publisher_name,
        ::Components::EventConsumerBase_ptr subscriber
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidName,
                       ::Components::InvalidConnection,
                       ::Components::ExceededConnectionLimit));

      virtual ::Components::EventConsumerBase_ptr
      unsubscribe (
        const char *publisher_name,
        ::Components::Cookie *ck
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidName,
                       ::Components::InvalidConnection));

      virtual void
      connect_consumer (
        const char *emitter_name,
        ::Components::EventConsumerBase_ptr consumer
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidName,
                       ::Components::AlreadyConnected,
                       ::Components::InvalidConnection));

      virtual ::Components::EventConsumerBase_ptr
      disconnect_consumer (
        const char *source_name
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException,
                       ::Components::InvalidName,
                       ::Components::NoConnection));

      virtual ::Components::PublisherDescriptions *
      get_all_publishers (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      virtual ::Components::EmitterDescriptions *
      get_all_emitters (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      // CIAO specific operations on the servant. 
      CORBA::Object_ptr
      get_facet_executor (
        const char *name
        ACE_ENV_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      private:

      ::TSCE::Command_EventConsumer_var
      consumes_command_;

      ::TSCE::Status_EventConsumer_var
      consumes_status_;

      const char *ins_name_;

      private:

      void
      populate_port_tables (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      ::Components::EventConsumerBase_ptr
      get_consumer_command_i (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));

      ::Components::EventConsumerBase_ptr
      get_consumer_status_i (
        ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS)
      ACE_THROW_SPEC (( ::CORBA::SystemException));
    };

    class EFFECTOR_MAIN_IMPL_SVNT_Export Effector_Main_Factory_Servant
      : public virtual
          ::CIAO::Home_Servant_Impl<
              ::POA_TSCE::Effector_Main_Factory,
              ::TSCE::CCM_Effector_Main_Factory,
              Effector_Main_Servant
            >
    {
      public:

      Effector_Main_Factory_Servant (
        ::TSCE::CCM_Effector_Main_Factory_ptr exe,
        const char *ins_name,
        ::CIAO::Session_Container *c,
        ::CIAO::REC_POL_MAP &rec_pol_map);

      virtual ~Effector_Main_Factory_Servant (void);

      // Home operations.
      // Home factory and finder operations.

      // Attribute operations.
    };

    extern "C" EFFECTOR_MAIN_IMPL_SVNT_Export ::PortableServer::Servant
    create_TSCE_Effector_Main_Factory_Servant (
      ::Components::HomeExecutorBase_ptr p,
      CIAO::Session_Container *c,
      const char *ins_name,
      ::CIAO::REC_POL_MAP &rec_pol_map
      ACE_ENV_ARG_DECL_WITH_DEFAULTS);
  }
}

#include /**/ "ace/post.h"

#endif /* CIAO_GLUE_SESSION_EFFECTOR_MAIN_IMPL_SVNT_H */

