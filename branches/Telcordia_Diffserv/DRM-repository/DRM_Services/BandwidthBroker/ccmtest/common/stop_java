#! /bin/sh
# ====================================================================
#
# OpenCCM: The Open CORBA Component Model Platform
# Copyright (C) 2000-2003 INRIA - USTL - LIFL - GOAL
# Contact: openccm-team@objectweb.org
#
# This library is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2.1 of the License, or any later version.
#
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public
# License along with this library; if not, write to the Free Software
# Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307
# USA
#
# Initial developer(s): Philippe Merle.
# Contributor(s): Christophe Demarey, Briclet Frédéric.
#
# ====================================================================
#
# Stopping a demonstration.
#
# $1: demonstration name.
#
# ====================================================================

# Tear down the assembly.
tear_down $1 

# Stop Java Component Servers.
#
jcs_stop ComponentClient
# jcs_stop ComponentBWServer
# ComponentFPServer

	
# Stop the default main node.
#
node_stop MainNode

# Stop the default factory.
#
factory_stop DefaultFactory

# Stop the DCI Manager.
#
dci_stop DefaultDCI

# Stop the COACH Tracing Service (if any is running)
#
coach_tracing_stop

# Stop the Name Service.
#
#ns_stop

# Stop the Transaction Service.
#
  # Obtain the IOR of the started Transaction Service.
  #
  ior_OTS=`ots_ior`

  # Check if a Transaction Service is started.
  #
  if [ "${ior_OTS}" != "" ]
  then
      ots_stop
  fi

# Stop the Trading Service.
#
  # Obtain the IOR of the started Trading Service.
  #
  ior_trader=`trader_ior`

  # Check if a Trading Service is started.
  #
  if [ "${ior_trader}" != "" ]
  then
      trader_stop
  fi

# Deinstall the OpenCCM Platform.
#
ccm_deinstall
