#! /bin/sh
# =============================================================================
#
# = DESCRIPTION
#     Generates member function stubs for the src file to standard output.
#
# = AUTHOR(S)
#     Graham Dumpleton
#     K. Dorn
# 
# = COPYRIGHT
#     Copyright 1991 OTC LIMITED
#
# =============================================================================

OSE_HOST=

OSE_RELEASE_NAME=
export OSE_RELEASE_NAME

OSE_ROOT=${OSE_ROOT-$WRAPPER_ROOT}
export OSE_ROOT

OSE_VERSION_ROOT=$OSE_ROOT/$OSE_RELEASE_NAME
export OSE_VERSION_ROOT

BINDIR="$OSE_VERSION_ROOT/$OSE_HOST/bin"
LIBDIR=${CLASSINFOLIBDIR-"$OSE_VERSION_ROOT/lib"}

CLASS2INFO="$BINDIR/class2info"
INFO2SRC="$BINDIR/info2src"

#
# Error.
#
ERROR()
{
  echo "`basename $0`: $1" >&2
  shift
  while test $# != "0"
  do
    echo $1 >&2
    shift
  done
  exit 1
}

#
# Usage message.
#
USAGE()
{
  ERROR "Usage: `basename $0` files"
} 

#
# Check usage.
#
if test "$#" = "0"
then
  USAGE
fi

while test "$#" != "0"
do
  $CLASS2INFO $1
  if test "$?" != "0"
  then
    exit 1
  fi
  file=`basename $1`
  base="`echo $file | sed -e 's/\..*$//'`"
  if test -f "$base.ci"
  then
    $INFO2SRC $base.ci $2 $3 $4
    rm -f $base.ci
  fi
  shift
done
