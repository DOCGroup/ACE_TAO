#
# $Id$
#
# Makefile for building the GroupRef_Manipulation test client
#

NAME = server


TAO_IDL = $(CORE_BINDIR)\tao_idl -g $(CORE_BINDIR)\gperf.exe

OBJFILES = \
   $(OBJDIR)\Server_ORBInitializer.obj \
   $(OBJDIR)\Server_Request_Interceptor.obj \
   $(OBJDIR)\server.obj \
   $(OBJDIR)\testC.obj \
   $(OBJDIR)\testS.obj \
   $(OBJDIR)\test_i.obj

LFLAGS = \
   -j..\..\..\..\..\lib\$(CONFIG_SUBDIR) -j..\..\..\..\..\lib \
   -L..\..\..\..\..\lib\$(CONFIG_SUBDIR) -L..\..\..\..\..\lib \
  -j$(CORE_BINDIR) \
  -L$(CORE_BINDIR)

LIBFILES = \
   $(ACE_LIB) \
   $(TAO_LIB) \
   $(TAO_PORTABLESERVER_LIB) \
   $(TAO_IORMANIP_LIB) \
   $(TAO_SVC_UTILS_LIB) \
   $(TAO_NAMING_LIB) \
   $(TAO_FTORB_LIB)


IDLFILES = \
   $(IDLDIR)\test.idl

CFLAGS = \
   $(ACE_CFLAGS) \
   $(TAO_CFLAGS) \
   $(TAO_PORTABLESERVER_CFLAGS) \
   $(TAO_IORMANIP_CFLAGS) \
   $(TAO_SVC_UTILS_CFLAGS)	\
   $(TAO_NAMING_CFLAGS) \
   $(TAO_FTORB_CFLAGS)

CPPDIR = .

IDLDIR = .

INCLUDES = \
   Server_ORBInitializer.h \
   Server_Request_Interceptor.h \
   testC.h \
   testS.h \
   testS_T.h \
   test_i.h \
   testS_T.cpp \
   testC.i \
   testS.i \
   testS_T.i \
   test.idl

all: idl_src_files

!include <$(ACE_ROOT)\include\makeinclude\build_exe.bor>

#
# IDL Build rules
#

idl_src_files: $(IDLFILES:.idl=C.cpp) $(IDLFILES:.idl=S.cpp)

# IDL File Directory: .
$(IDLDIR)\testS.cpp $(IDLDIR)\testC.cpp: $(IDLDIR)\test.idl
   $(TAO_IDL) -Gv -DCORBA3 -I..\..\..\.. -Gv -Ge 1 -Sc -Wb,pre_include=ace\pre.h -Wb,post_include=ace\post.h $**

