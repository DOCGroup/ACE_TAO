// -*- MPC -*-
// $Id$

project(*Server): messaging, taoexe, portableserver {
  Source_Files {
    Oneway_Buffering.cpp
    server.cpp
  }  
}

// These next two projects depend on *Server (the above project)
// due to the possibility of parallelism for the GNUACE type.  If
// -j 2 or more is used to build this project, multiple instances
// of tao_idl are invoked for Test.idl.  They begin to overwrite the
// generated source files and cause problems for the processes that
// have gone on to build the generated files. By depending on *Server,
// only one process is allowed to compile Test.idl and thus the build
// succeeds.
project(*Client): messaging, taoexe, portableserver {
  requires += corba_messaging
  after += *Server

  Source_Files {
    TestC.cpp
    client.cpp
  }  
}

project(*Admin): messaging, taoexe, portableserver {
  after += *Client
  Source_Files {
    Oneway_Buffering_Admin.cpp
    admin.cpp
  }  
}
