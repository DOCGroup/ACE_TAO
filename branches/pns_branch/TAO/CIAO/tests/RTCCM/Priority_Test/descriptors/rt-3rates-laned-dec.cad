<?xml version="1.0"?> <!-- -*- SGML -*-  -->

<!-- If this file is moved to a different directory, make sure to change the
     path to the DTD below. Otherwise the examples won't work. -->
<!DOCTYPE componentassembly SYSTEM "../../../../docs/XML/componentassembly.dtd">

<!-- 3 rate test with increasing prio = decreasing rate -->

<componentassembly id="A test assembly for 3 worker running on 3 rates.">
  <componentfiles>
    <componentfile id="com-Controller25">
      <fileinarchive name="Controller25.csd"/>
    </componentfile>
    <componentfile id="com-Controller50">
      <fileinarchive name="Controller50.csd"/>
    </componentfile>
    <componentfile id="com-Controller75">
      <fileinarchive name="Controller75.csd"/>
    </componentfile>
    <componentfile id="com-Worker">
      <fileinarchive name="CB_Worker.csd"/>
    </componentfile>
  </componentfiles>

  <partitioning>
  <!-- Install component on 2 processes without any RT extension -->
     <processcollocation>
      <homeplacement id="a25_WorkerHome">
        <componentfileref idref="com-Worker"/>
        <componentinstantiation id="a_W25"/>
        <extension class="RT-POLICY-SET"
                   origin="CIAO">HIGH_POLICY_LANED_POOL</extension>
      </homeplacement>

      <homeplacement id="a50_WorkerHome">
        <componentfileref idref="com-Worker"/>
        <componentinstantiation id="a_W50"/>
        <extension class="RT-POLICY-SET"
                   origin="CIAO">MID_POLICY_LANED_POOL</extension>
      </homeplacement>

      <homeplacement id="a75_WorkerHome">
        <componentfileref idref="com-Worker"/>
        <componentinstantiation id="a_W75"/>
        <extension class="RT-POLICY-SET"
                   origin="CIAO">LOW_POLICY_LANED_POOL</extension>
      </homeplacement>
      <extension class="RT-CAD-EXT" origin="CIAO">basic_rt.rtd</extension>
     </processcollocation>

     <!-- We will run on server's priority -->
     <processcollocation>
      <homeplacement id="a_C25Home">
        <componentfileref idref="com-Controller25"/>
        <componentinstantiation id="a_C25">
          <registercomponent>
            <!-- writeiortofile is a non-standard CIAO extension.  -->
            <writeiortofile name="c25.ior"/>
          </registercomponent>
        </componentinstantiation>
      </homeplacement>

      <homeplacement id="a_C50Home">
        <componentfileref idref="com-Controller50"/>
        <componentinstantiation id="a_C50">
          <registercomponent>
            <!-- writeiortofile is a non-standard CIAO extension.  -->
            <writeiortofile name="c50.ior"/>
          </registercomponent>
        </componentinstantiation>
      </homeplacement>

      <homeplacement id="a_C75Home">
        <componentfileref idref="com-Controller75"/>
        <componentinstantiation id="a_C75">
          <registercomponent>
            <!-- writeiortofile is a non-standard CIAO extension.  -->
            <writeiortofile name="c75.ior"/>
          </registercomponent>
        </componentinstantiation>
      </homeplacement>
     <destination>Remote</destination>
     </processcollocation>

  </partitioning>

  <connections>

    <connectinterface>
      <usesport>
        <usesidentifier>worker</usesidentifier>
        <componentinstantiationref idref="a_C25"/>
      </usesport>
      <providesport>
        <providesidentifier>some_device</providesidentifier>
        <componentinstantiationref idref="a_W25"/>
      </providesport>
    </connectinterface>

    <connectinterface>
      <usesport>
        <usesidentifier>worker</usesidentifier>
        <componentinstantiationref idref="a_C50"/>
      </usesport>
      <providesport>
        <providesidentifier>some_device</providesidentifier>
        <componentinstantiationref idref="a_W50"/>
      </providesport>
    </connectinterface>

    <connectinterface>
      <usesport>
        <usesidentifier>worker</usesidentifier>
        <componentinstantiationref idref="a_C75"/>
      </usesport>
      <providesport>
        <providesidentifier>some_device</providesidentifier>
        <componentinstantiationref idref="a_W75"/>
      </providesport>
    </connectinterface>

  </connections>

</componentassembly>
