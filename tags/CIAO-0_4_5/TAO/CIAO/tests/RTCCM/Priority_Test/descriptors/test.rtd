<?xml version="1.0"?> <!-- -*- SGML -*-  -->

<!-- If this file is moved to a different directory, make sure to change the
     path to the DTD below. Otherwise the examples won't work. -->
<!DOCTYPE rtcad_ext SYSTEM "../../../../docs/XML/ciao_rt_cad_ext.dtd">

<!-- Here is a sample real-time cad file extension descriptor. -->
<!-- Take a look at the RTCAD-example.cad to see how to associate -->
<!-- a componentassembly descriptor file with this file and how to -->
<!-- use the policy sets defined in this file. -->

<rtcad_ext>

  <!-- First, we need to define how we are going to allocate -->
  <!-- real-time related resources. -->
  <rtresources>

    <threadpoolwithlanes
                id="shared_pool"
                stacksize="0"
                borrowing="no"
                buffering="no"
                max_buffer="0"
                buffer_size="0">
      <lane priority="1"
            static_threads="100"
            dynamic_threads="300"/>
      <lane priority="2"
            static_threads="2"
            dynamic_threads="2"/>
      <lane priority="3"
            static_threads="1"
            dynamic_threads="2"/>
    </threadpoolwithlanes>

    <threadpool id="common_pool"
                stacksize="0"
                static_threads="10"
                dynamic_threads="20"
                priority="1"
                buffering="no"
                max_buffer="0"
                buffer_size="0"/>

    <threadpool id="high_prio_pool"
                stacksize="0"
                static_threads="2"
                dynamic_threads="2"
                priority="3"
                buffering="no"
                max_buffer="0"
                buffer_size="0"/>

    <threadpoolwithlanes
                id="laned_pool"
                stacksize="0"
                borrowing="no"
                buffering="no"
                max_buffer="0"
                buffer_size="0">
      <lane priority="1"
            static_threads="10"
            dynamic_threads="30"/>
      <lane priority="2"
            static_threads="3"
            dynamic_threads="3"/>
      <lane priority="3"
            static_threads="1"
            dynamic_threads="2"/>
    </threadpoolwithlanes>

    <connectionbands id="common_conn">
      <band low="1" high="1"/>
      <band low="2" high="2"/>
      <band low="3" high="3000"/>
    </connectionbands>
  </rtresources>

  <!-- Then, we define sets of policies that can be associated with -->
  <!-- containers (or <homeplacement> rather) -->

  <rtpolicyset id="POLICY_1">
    <priority_model_policy type="server_declared" priority="2"/>
    <threadpool_policy idref="shared_pool"/>
    <banded_connection_policy idref="common_conn"/>
  </rtpolicyset>

  <rtpolicyset id="POLICY_2">
    <threadpool_policy idref="common_pool"/>
    <priority_model_policy type="client_propagated" priority="2"/>
  </rtpolicyset>

</rtcad_ext>