<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--//$Id$  -->
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE>AMI4CCM Tutorial Hello - IDL</TITLE>
</HEAD>
<BODY>
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=2 CELLSPACING=2 STYLE="PAGE-BREAK-BEFORE: always">
  <TR>
    <TD ALIGN=left><A href="01_general.html">Previous</A></TD>
    <TD ALIGN=center><IMG border=0 name=graphics1 align=bottom src="images/images.png" width="4%" height="5%" ></TD>
    <TD ALIGN=right><A href="03_executors.html">Next</A></TD>
  </TR>
</TABLE>
<HR>
<H1 >IDL files</H1>
<P>The IDL files are generated by the modelling tools. To 
understand this example better, it'll give an overview of which IDL files are 
generated. </P>

<H2 CLASS="western">Common IDL files</H2>
<P>Below an simplied represenation of the common IDL files. 
Use the links to view the file itself. The following IDL files can be found in 
Hello_asm/ports: </P>
<UL>
  <LI><A href="../Hello_asm/ports/Hello_Common_defn.idl">Hello_Common_defn.idl</A>
	: <BR>for common includes and IDL defenitions. 
  <CODE module Hello { exception InternalError { long id; string error_string; }; };</CODE></LI>
 <LI><A href="../Hello_asm/ports/Hello_MyFoo_obj.idl">Hello_MyFoo_obj.idl</A>
	: <BR>for IDL interfaces. This IDL contains the #pragma's 
  for enabling AMI4CCM , needed by the TAO_IDL compiler: </P>
  <UL>
    <LI><CODE>#pragma ciao lem "Hello_MyFoo_objE.idl" </CODE></LI>
    <LI><CODE>#pragma ciao lem "Hello_MyFoo_objAE.idl"</CODE></LI>
    <LI>Pragma needed per interface for implying ami.<br>
	<CODE>#pragma ciao ami4ccm interface "Hello::MyFoo_obj"</CODE></LI>
   <LI>Name implied IDL file, used by IDL compiler to generate ami4ccm  functionality:<br>
   <CODE>#pragma ciao ami4ccm idl "Hello_MyFoo_objA.idl" </CODE></LI>
  </UL>
 </LI>
</UL>

<P>Also this IDL contains the interface between Sender and Receiver</P>
<P STYLE="MARGIN-BOTTOM: 0cm; MARGIN-LEFT: 1cm"><CODE>interface MyFoo_obj<BR>
{<BR>
&nbsp;&nbsp;<font color="blue">long</font> foo (<font color="blue">in string </font>in_str, <font color="blue">out string</font> answer)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;raises 
(InternalError);<br>
&nbsp;&nbsp;<font color="blue">void </font>hello (<font color="blue">out long </font>answer)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;raises (InternalError);<BR>
&nbsp;&nbsp;attribute <font color="blue">short</font> rw_attrib<BR>
&nbsp;&nbsp;&nbsp;&nbsp;getraises (InternalError)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;setraises 
(InternalError);</FONT><br>
&nbsp;&nbsp;readonly attribute <font color="blue">short</font>
ro_attrib<BR>&nbsp;&nbsp;&nbsp;&nbsp;raises (InternalError);<BR>
};</CODE></P>

<H2>Component IDL files:</H2>
<H3><U>Sender component IDL file</U></H3>
<P>The <A href="../Hello_asm/Sender_comp/src/Hello_Sender_comp.idl">Hello_Sender_comp.idl</A>
file in the Sender_comp/src directory defines the asynchronous and
synchronous connections.<br> For synchronous invocations, the Sender component uses the 
MyFoo_obj interface (which the Receiver provides):<BR><br>
<CODE>component Sender<br>{<BR>
&nbsp;<FONT COLOR="green">// For synchronous invocation</FONT><BR>
&nbsp;&nbsp;uses MyFoo run_my_foo;<BR>};</CODE> 
</P>
<P><FONT COLOR="#000000"><FONT SIZE=3>For asynchronous invocations, the Sender component uses the 
AMI_MyFoo_obj interface of the AMI component and provides the 
AMI_MyFoo_objReplyHandler interface to the AMI component.<br> This is indicated with the following pragma:<br><br>
<CODE>#pragma ciao ami4ccm receptacle "Hello::Sender_comp::run_my_foo"
.</CODE></P>

<H3><U>Receiver component IDL file</U></H3>
<P>The <A href="../Hello_asm/Receiver_comp/src/Hello_Receiver_comp.idl">Hello_Receiver_comp.idl</A>
file in the Receiver_comp/src directory indicates the port the
receiver provide.</P>
<P> <CODE>component Receiver<BR>
{<BR>
&nbsp;&nbsp;&nbsp;<FONT color="green">//Provides<BR></FONT>
&nbsp;&nbsp;provides MyFoo_obj do_my_foo;<BR>
};</CODE><BR><br>
The receiver isn't aware of the calls are a- or synchronously.</P>

<TABLE WIDTH="100%" BORDER=0 CELLPADDING=2 CELLSPACING=2>
<TR>
  <TD ALIGN=left><A href="01_general.html">Previous</A></TD>
  <TD ALIGN=center><IMG border=0 name=graphics2 align=bottom src="images/images.png" width="4%" height="5%" ></TD>
  <TD ALIGN=right><A href="03_executors.html">Next</A></TD></TR></TABLE>
<P><BR><BR></P>
</BODY>
</HTML>
