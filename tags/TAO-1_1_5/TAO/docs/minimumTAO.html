<!-- $Id$ -->

<html>
  <head>
    <title>Minimum TAO</title>
    <link rev=made href="mailto:tao-users@cs.wustl.edu">
  </head>

<body text = "#000000"
      link="#000fff"
      vlink="#ff0f0f"
      bgcolor="#ffffff">

<hr>
<p>

<strong>Minimum TAO</strong>
<p>

We have added support for the new <a href =
"http://www.omg.org/cgi-bin/doc?orbos/98-08-04.pdf"><em>minimumCORBA
</em></a> specification to <a href =
"http://www.cs.wustl.edu/~schmidt/TAO.html">TAO</a>.  The <em>
minimumCORBA </em> specification removes the following features from
the CORBA <a href = "http://www.omg.org/library/c2indx.html">2.2</a>
specification.

<ul>

<li>Dynamic Skeleton Interface<br>
<li>Dynamic Invocation Interface<br>
<li>Dynamic Any<br>
<li>Interceptors<br>
<li>Interface Repository<br>
<li>Advanced POA features<br>
<li>CORBA/COM interworking<br>

</ul>
<p>

To minimize the footprint of TAO, we first <a href=
"http://www.cs.wustl.edu/~schmidt/ACE_wrappers/ACE-INSTALL.html">configure</a>
ACE to support only those <a href =
"http://www.cs.wustl.edu/~schmidt/ACE_wrappers/docs/ACE-subsets.html">components</a>
that are required by TAO. Secondly, we <a href =
"http://www.cs.wustl.edu/~schmidt/ACE_wrappers/TAO/TAO-INSTALL.html">configure</a>
TAO to only support the components specified by the
<em>minimumCORBA</em> specification.  The following two tables show
the footprint reduction achieved.  Note that the IDL Compiler column
refers to the code required to collaborate between the IDL compiler
and the ORB, and not to the code for the IDL compiler itself.
<p>
<hr>
<p>

Note: All measurement are for ACE 5.0 and TAO 1.0 using egcs-2.91.60
on SunOS5.7<P>

The <a
href="http://www.cs.wustl.edu/~schmidt/ACE_wrappers/ACE-INSTALL.html#flags">make
flags</a> options used were: <P>

<code> debug=0 optimize=1 static_libs_only=1 DEFFLAGS=-DACE_USE_RCSID=0 </code> <P>

These options translate into:<P>
<UL>
<LI> No debugging
<LI> Optimization is set to -O2
<LI> Static ACE and TAO libraries
<LI> Use of RCS Ids is turned off
</UL>
<p>

To build a TAO static library, if shared libraries are the default,
use <code>make static_libs_only=1</code> (make sure to do this for
ACE, as well).  If you're using recent versions of GNU GCC, you can
use the <A HREF="../ACE-INSTALL.html#repo">-frepo</A> option, which
typically reduces the footprint by another 25 percent. <P>

<p>
<hr>
<p>

<center><table cellpadding=4 border=4>
  <tr>
    <th>Configuration
    <th>Component
    <th>Total
    <th>OS
    <th>Utils
    <th>Logging
    <th>Threads
    <th>Demux
    <th>Connection
    <th>Sockets
    <th>IPC
    <th>Svcconf
    <th>Streams
    <th>Memory
    <th>Token
    <th>Other
  <tr>
    <th rowspan=2>ACE (all components)
    <th>Size, bytes
    <td align=center>709.5
    <td align=center>11.9
    <td align=center>115.3
    <td align=center>13.7
    <td align=center>63.0
    <td align=center>88.0
    <td align=center>68.6
    <td align=center>16.9
    <td align=center>43.0
    <td align=center>99.8
    <td align=center>21.4
    <td align=center>29.2
    <td align=center>76.0
    <td align=center>62.9
  <tr>
    <th>Percentage of<br>total size
    <td align=center>100
    <td align=center>1.7
    <td align=center>16.2
    <td align=center>1.9
    <td align=center>8.9
    <td align=center>12.4
    <td align=center>9.7
    <td align=center>2.4
    <td align=center>6.0
    <td align=center>14.1
    <td align=center>3.0
    <td align=center>4.1
    <td align=center>10.7
    <td align=center>8.9
  <tr>
    <th rowspan=2>ACE (TAO components)
    <th>Size, bytes
    <td align=center>570.7
    <td align=center>11.9
    <td align=center>115.3
    <td align=center>13.7
    <td align=center>63.0
    <td align=center>88.0
    <td align=center>68.6
    <td align=center>16.9
    <td align=center>43.0
    <td align=center>99.8
    <td align=center>21.4
    <td align=center>29.2
    <td align=center>0
    <td align=center>0
  <tr>
    <th>Percentage of<br>total size
    <td align=center>100
    <td align=center>2.1
    <td align=center>20.2
    <td align=center>2.4
    <td align=center>11.0
    <td align=center>15.4
    <td align=center>12.0
    <td align=center>3.0
    <td align=center>7.5
    <td align=center>17.5
    <td align=center>3.7
    <td align=center>5.1
    <td align=center>0
    <td align=center>0
  <tr>
    <th>Reduction
    <th>%
    <td align=center>19.6
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>100
    <td align=center>100
</table></center><p>

<hr>

<p>

<center><table cellpadding=4 border=4>
  <tr>
    <th>Configuration
    <th>Component
    <th>Total
    <th>POA
    <th>Pluggable Protocols
    <th>Default Resources
    <th>Interpretive Marshaling
    <th>IDL Compiler
    <th>ORB Core
    <th>Dynamic Any
  <tr>
    <th rowspan=2>Complete TAO
    <th>Size, Kbytes
    <td align=center>1617.2
    <td align=center>412.5
    <td align=center>281.0
    <td align=center>32.1
    <td align=center>73.4
    <td align=center>10.7
    <td align=center>595.2
    <td align=center>212.3
  <tr>
    <th>Percentage of<br>total size
    <td align=center>100
    <td align=center>25.5
    <td align=center>17.4
    <td align=center>2.0
    <td align=center>4.5
    <td align=center>0.7
    <td align=center>36.8
    <td align=center>13.1
  <tr>
    <th rowspan=2>Minimum TAO
    <th>Size, Kbytes
    <td align=center>1359.2
    <td align=center>376.2
    <td align=center>281.0
    <td align=center>32.1
    <td align=center>73.4
    <td align=center>10.7
    <td align=center>585.5
    <td align=center>0.0
  <tr>
    <th>Percentage of<br>total size
    <td align=center>100
    <td align=center>27.7
    <td align=center>20.7
    <td align=center>2.4
    <td align=center>5.4
    <td align=center>0.8
    <td align=center>43.1
    <td align=center>0.0
  <tr>
    <th>Reduction
    <th>%
    <td align=center>16.0
    <td align=center>8.8
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>0
    <td align=center>1.6
    <td align=center>100
</table></center><p>

</body>
</html>
