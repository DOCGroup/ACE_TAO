--- orig/TAOC.cpp	Tue Jun 12 17:41:13 2001
+++ TAOC.cpp	Tue Jun 12 13:58:15 2001
@@ -1,6 +1,6 @@
 // -*- C++ -*-
 //
-// $Id$
+// $Id$ */
 
 // ****  Code generated by the The ACE ORB (TAO) IDL Compiler ****
 // TAO and the TAO IDL Compiler have been developed by:
@@ -21,24 +21,15 @@
 
 #include "TAOC.h"
 
-#include "tao/Stub.h"
-#include "tao/Invocation.h"
-#include "tao/PortableInterceptor.h"
-
-#if TAO_HAS_INTERCEPTORS == 1
-#include "tao/RequestInfo_Util.h"
-#include "tao/ClientRequestInfo.h"
-#include "tao/ClientInterceptorAdapter.h"
-#endif  /* TAO_HAS_INTERCEPTORS == 1 */
-
-#if defined (__BORLANDC__)
-#pragma option -w-rvl -w-rch -w-ccc -w-aus
-#endif /* __BORLANDC__ */
+#include "tao/Typecode.h"
 
 #if !defined (__ACE_INLINE__)
 #include "TAOC.i"
 #endif /* !defined INLINE */
 
+
+#if (TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1)
+
 static const CORBA::Long _oc_TAO_BufferingConstraintMode[] =
 {
   TAO_ENCAP_BYTE_ORDER, // byte order
@@ -187,9 +178,9 @@
 TAO_NAMESPACE_DEFINE (CORBA::TypeCode_ptr, _tc_BufferingConstraint, &_tc_TAO_tc_TAO_BufferingConstraint)
 TAO_NAMESPACE_END
 
-void TAO::BufferingConstraint::_tao_any_destructor (void *_tao_void_pointer)
+void TAO::BufferingConstraint::_tao_any_destructor (void *x)
 {
-  BufferingConstraint *tmp = ACE_static_cast (BufferingConstraint*, _tao_void_pointer);
+  BufferingConstraint *tmp = ACE_static_cast (BufferingConstraint*,x);
   delete tmp;
 }
 
@@ -197,48 +188,6 @@
 TAO_NAMESPACE_BEGIN (TAO)
 TAO_NAMESPACE_DEFINE (const CORBA::ULong, BUFFERING_CONSTRAINT_POLICY_TYPE, 1413545985U)
 TAO_NAMESPACE_END
-TAO::BufferingConstraintPolicy_ptr
-tao_TAO_BufferingConstraintPolicy_duplicate (
-    TAO::BufferingConstraintPolicy_ptr p
-  )
-{
-  return TAO::BufferingConstraintPolicy::_duplicate (p);
-}
-
-void
-tao_TAO_BufferingConstraintPolicy_release (
-    TAO::BufferingConstraintPolicy_ptr p
-  )
-{
-  CORBA::release (p);
-}
-
-TAO::BufferingConstraintPolicy_ptr
-tao_TAO_BufferingConstraintPolicy_nil (
-    void
-  )
-{
-  return TAO::BufferingConstraintPolicy::_nil ();
-}
-
-TAO::BufferingConstraintPolicy_ptr
-tao_TAO_BufferingConstraintPolicy_narrow (
-    CORBA::Object *p,
-    CORBA::Environment &ACE_TRY_ENV
-  )
-{
-  return TAO::BufferingConstraintPolicy::_narrow (p, ACE_TRY_ENV);
-}
-
-CORBA::Object *
-tao_TAO_BufferingConstraintPolicy_upcast (
-    void *src
-  )
-{
-  TAO::BufferingConstraintPolicy **tmp =
-    ACE_static_cast (TAO::BufferingConstraintPolicy **, src);
-  return *tmp;
-}
 
 // *************************************************************
 // Operations for class TAO::BufferingConstraintPolicy_var
@@ -362,9 +311,8 @@
     ACE_static_cast (BufferingConstraintPolicy **, src);
   return *tmp;
 }
-
 // *************************************************************
-// Operations for class TAO::BufferingConstraintPolicy_out
+// Inline operations for class TAO::BufferingConstraintPolicy_out
 // *************************************************************
 
 TAO::BufferingConstraintPolicy_out::BufferingConstraintPolicy_out (BufferingConstraintPolicy_ptr &p)
@@ -475,11 +423,11 @@
   void *retv = 0;
   if (type == ACE_reinterpret_cast
     (ptr_arith_t,
-      &ACE_NESTED_CLASS (::TAO, BufferingConstraintPolicy)::_narrow))
+      &BufferingConstraintPolicy::_narrow))
     retv = ACE_reinterpret_cast (void*, this);
   else if (type == ACE_reinterpret_cast
     (ptr_arith_t,
-      &::CORBA::Policy::_narrow))
+      &CORBA::Policy::_narrow))
     retv = ACE_reinterpret_cast
       (
         void *,
@@ -503,6 +451,8 @@
   return "IDL:TAO/BufferingConstraintPolicy:1.0";
 }
 
+#endif /* TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1 */
+
 static const CORBA::Long _oc_TAO_SyncScope[] =
 {
   TAO_ENCAP_BYTE_ORDER, // byte order
@@ -558,6 +508,10 @@
 TAO_NAMESPACE_BEGIN (TAO)
 TAO_NAMESPACE_DEFINE (const CORBA::Short, SYNC_DELAYED_BUFFERING, -2)
 TAO_NAMESPACE_END
+
+
+#if (TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1)
+
 void operator<<= (CORBA::Any &_tao_any, const TAO::BufferingConstraint &_tao_elem) // copying
 {
   TAO_OutputCDR stream;
@@ -594,12 +548,14 @@
   ACE_TRY_NEW_ENV
   {
     CORBA::TypeCode_var type = _tao_any.type ();
-    
-    CORBA::Boolean result = type->equivalent (TAO::_tc_BufferingConstraint, ACE_TRY_ENV);
+    CORBA::Boolean result =
+      type->equivalent (TAO::_tc_BufferingConstraint, ACE_TRY_ENV);
     ACE_TRY_CHECK;
     
     if (!result)
-      return 0; // not equivalent
+      {
+        return 0;
+      }
     
     if (_tao_any.any_owns_data ())
     {
@@ -641,10 +597,4 @@
   return 0;
 }
 
-#if defined (ACE_HAS_EXPLICIT_TEMPLATE_INSTANTIATION)  || \
-    defined (ACE_HAS_GNU_REPO)
-    template class TAO_Object_Manager<TAO::BufferingConstraintPolicy,TAO::BufferingConstraintPolicy_var>;
-  #elif defined (ACE_HAS_TEMPLATE_INSTANTIATION_PRAGMA)
-  #  pragma instantiate TAO_Object_Manager<TAO::BufferingConstraintPolicy,TAO::BufferingConstraintPolicy_var>
-#endif /* ACE_HAS_EXPLICIT_TEMPLATE_INSTANTIATION */
-
+#endif /* TAO_HAS_BUFFERING_CONSTRAINT_POLICY == 1 */
