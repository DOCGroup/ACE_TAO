<?xml version="1.0"?> <!-- -*- SGML -*-  -->

<!-- If this file is moved to a different directory, make sure to change the
     path to the DTD below. Otherwise the examples won't work. -->
<!DOCTYPE rtcad_ext SYSTEM "../../../../docs/XML/ciao_rt_cad_ext.dtd">

<!-- Here is a sample real-time cad file extension descriptor. -->
<!-- Take a look at the RTCAD-example.cad to see how to associate -->
<!-- a componentassembly descriptor file with this file and how to -->
<!-- use the policy sets defined in this file. -->

<rtcad_ext>

  <!-- First, we need to define how we are going to allocate -->
  <!-- real-time related resources. -->
  <rtresources>

    <threadpool id="common_pool"
                stacksize="0"
                static_threads="3"
                dynamic_threads="0"
                priority="1"
                buffering="no"
                max_buffer="0"
                buffer_size="0"/>

    <threadpool id="middle_pool"
                stacksize="0"
                static_threads="3"
                dynamic_threads="0"
                priority="2"
                buffering="no"
                max_buffer="0"
                buffer_size="0"/>

    <threadpool id="high_prio_pool"
                stacksize="0"
                static_threads="3"
                dynamic_threads="0"
                priority="3"
                buffering="no"
                max_buffer="0"
                buffer_size="0"/>

  </rtresources>

  <!-- Then, we define sets of policies that can be associated with -->
  <!-- containers (or <homeplacement> rather) -->

  <rtpolicyset id="LOW_PRIO_LOW_POOL">
    <priority_model_policy type="server_declared" priority="1"/>
    <threadpool_policy idref="common_pool"/>
  </rtpolicyset>

  <rtpolicyset id="MID_PRIO_LOW_POOL">
    <priority_model_policy type="server_declared" priority="2"/>
    <threadpool_policy idref="common_pool"/>
  </rtpolicyset>

  <rtpolicyset id="HIGH_PRIO_LOW_POOL">
    <priority_model_policy type="server_declared" priority="3"/>
    <threadpool_policy idref="common_pool"/>
  </rtpolicyset>

  <rtpolicyset id="LOW_PRIO_MID_POOL">
    <priority_model_policy type="server_declared" priority="1"/>
    <threadpool_policy idref="middle_pool"/>
  </rtpolicyset>

  <rtpolicyset id="MID_PRIO_MID_POOL">
    <priority_model_policy type="server_declared" priority="2"/>
    <threadpool_policy idref="middle_pool"/>
  </rtpolicyset>

  <rtpolicyset id="HIGH_PRIO_MID_POOL">
    <priority_model_policy type="server_declared" priority="3"/>
    <threadpool_policy idref="middle_pool"/>
  </rtpolicyset>

  <rtpolicyset id="LOW_PRIO_HIGH_POOL">
    <priority_model_policy type="server_declared" priority="1"/>
    <threadpool_policy idref="high_prio_pool"/>
  </rtpolicyset>

  <rtpolicyset id="MID_PRIO_HIGH_POOL">
    <priority_model_policy type="server_declared" priority="2"/>
    <threadpool_policy idref="high_prio_pool"/>
  </rtpolicyset>

  <rtpolicyset id="HIGH_PRIO_HIGH_POOL">
    <priority_model_policy type="server_declared" priority="3"/>
    <threadpool_policy idref="high_prio_pool"/>
  </rtpolicyset>

</rtcad_ext>